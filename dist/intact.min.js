(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("vdt")):typeof define==="function"&&define.amd?define(["vdt"],t):e.Intact=t()})(this,function(){"use strict";var e=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}var i=t(function(t,i){(function(e,i){t.exports=i()})(e,function(){"use strict";var e=0;var t={JS:e++,JSXText:e++,JSXElement:e++,JSXExpressionContainer:e++,JSXAttribute:e++,JSXEmptyExpression:e++,JSXWidget:e++,JSXVdt:e++,JSXBlock:e++,JSXComment:e++,JSXDirective:e++};var i=[];var n={area:true,base:true,br:true,col:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,menuitem:true,meta:true,param:true,source:true,track:true,wbr:true};var r={style:true,script:true,textarea:true};var s={"v-if":true,"v-else-if":true,"v-else":true,"v-for":true,"v-for-value":true,"v-for-key":true};var a={autoReturn:true,onlySource:false,delimiters:["{","}"],noWith:false,server:false,skipWhitespace:false};var u=Object.prototype.hasOwnProperty;var o=function(){};(function(){for(var e in t){if(u.call(t,e)){i[t[e]]=e}}})();function l(e){if(e==null)return false;var t=e.length;return typeof t==="number"&&t>-1&&t%1===0&&t<=9007199254740991&&typeof e!=="function"}function f(e,t,i){if(l(e)){for(var n=0,r=e.length;n<r;n++){t.call(i,e[n],n,e)}}else if(c(e)){for(var s in e){if(u.call(e,s)){t.call(i,e[s],s,e)}}}}function c(e){var t=typeof e;return t==="function"||t==="object"&&!!e}var h={each:f,map:function(e,t,i){var n=[];f(e,function(e,r,s){n.push(t.call(i,e,r,s))});return n},className:function(e){if(e==null)return;if(typeof e==="string")return e;var t=[];for(var i in e){if(u.call(e,i)&&e[i]){t.push(i)}}return t.join(" ")},isObject:c,isWhiteSpace:function(e){return e<=160&&(e>=9&&e<=13)||e==32||e==160||e==5760||e==6158||e>=8192&&(e<=8202||e==8232||e==8233||e==8239||e==8287||e==12288||e==65279)},trimRight:function(e){var t=e.length;while(t--&&h.isWhiteSpace(e.charCodeAt(t))){}return e.slice(0,t+1)},trimLeft:function(e){var t=e.length,i=-1;while(i++<t&&h.isWhiteSpace(e.charCodeAt(i))){}return e.slice(i)},Type:t,TypeName:i,setDelimiters:function(e){if(!h.isArray(e)){throw new Error('The parameter must be an array like ["{{", "}}"]')}a.delimiters=e},getDelimiters:function(){return a.delimiters},configure:function(e){if(e!==undefined){utils.extend(a,e)}return a},isSelfClosingTag:function(e){return n[e]},isTextTag:function(e){return r[e]},isDirective:function(e){return u.call(s,e)},extend:function(e,t){var i=arguments.length;if(i>1){for(var n=1;n<i;n++){t=arguments[n];if(t){for(var r in t){if(u.call(t,r)){e[r]=t[r]}}}}}return e},isArray:Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},noop:o,require:mt,error:function(){var e=typeof console!=="undefined";return e?function(e){console.error(e)}:o}()};var v=h;var d=v.Type;var p=v.TypeName;var m=/^<\w+:?\s*[\w\/>]/;function y(e){return e===58||e===95||e===45||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57}var _=function(){this.source="";this.index=0;this.length=0};_.prototype={constructor:_,parse:function(e,t){this.source=v.trimRight(e);this.index=0;this.line=1;this.column=1;this.length=this.source.length;this.options=v.extend({},v.configure(),t);return this._parseTemplate()},_parseTemplate:function(){var e=[],t={count:0};while(this.index<this.length&&t.count>=0){e.push(this._advance(t))}return e},_advance:function(e){var t=this._char();if(t!=="<"){return this._scanJS(e)}else{return this._scanJSX()}},_scanJS:function(e){var t=this.index,i=this.options.delimiters;while(this.index<this.length){var n=this._char();if(n==="'"||n==='"'){this._scanStringLiteral()}else if(this._isElementStart()){break}else{if(n==="{"){e.count++}else if(e.count>0&&n==="}"){e.count--}else if(this._isExpect(i[1])){e.count--;break}else if(n==="\n"){this._updateLine()}this._updateIndex()}}return this._type(d.JS,{value:this.source.slice(t,this.index)})},_scanStringLiteral:function(){var e=this._char(),t=this.index,i="";this._updateIndex();while(this.index<this.length){var n=this._char();if(n.charCodeAt(0)===10){this._updateLine()}this._updateIndex();if(n===e){e="";break}else if(n==="\\"){i+=this._char(this._updateIndex())}else{i+=n}}if(e!==""){this._error("Unclosed quote")}return this._type(d.StringLiteral,{value:this.source.slice(t,this.index)})},_scanJSX:function(){return this._parseJSXElement()},_scanJSXText:function(e){var t=this.index,i=e.length,n,r,s=false;e:while(this.index<this.length){r=this._charCode();if(v.isWhiteSpace(r)){if(r===10){this._updateLine()}if(this.options.skipWhitespace&&!s){t++}}else{s=true;for(n=0;n<i;n++){if(typeof e[n]==="function"&&e[n].call(this)||this._isExpect(e[n])){break e}}}this._updateIndex()}return t===this.index?null:this._type(d.JSXText,{value:this.source.slice(t,this.index)})},_scanJSXStringLiteral:function(){var e=this._char();if(e!=="'"&&e!=='"'){this._error("String literal must starts with a qoute")}this._updateIndex();var t=this._scanJSXText([e]);this._updateIndex();return t},_parseJSXElement:function(){this._expect("<");var e=this.index,t={},i=this._charCode();if(i>=65&&i<=90){this._type(d.JSXWidget,t)}else if(this._isExpect("!--")){return this._parseJSXComment()}else if(this._charCode(this.index+1)===58){e+=2;switch(i){case 116:this._type(d.JSXVdt,t);break;case 98:this._type(d.JSXBlock,t);break;default:this._error("Unknown directive "+String.fromCharCode(i)+":")}this._updateIndex(2)}else{this._type(d.JSXElement,t)}while(this.index<this.length){if(!y(this._charCode())){break}this._updateIndex()}t.value=this.source.slice(e,this.index);return this._parseAttributeAndChildren(t)},_parseAttributeAndChildren:function(e){var t=this._parseJSXAttribute();v.extend(e,{attributes:t.attributes,directives:t.directives,children:[]});if(!e.directives.length)delete e.directives;if(e.type===d.JSXElement&&v.isSelfClosingTag(e.value)){if(this._char()==="/"){this._updateIndex()}this._expect(">")}else if(this._char()==="/"){this._updateIndex();this._expect(">")}else{this._expect(">");e.children=this._parseJSXChildren(e)}return e},_parseJSXAttribute:function(){var e={attributes:[],directives:[]};while(this.index<this.length){this._skipWhitespace();if(this._char()==="/"||this._char()===">"){break}else{var t=this._parseJSXAttributeName();if(this._char()==="="){this._updateIndex();t.value=this._parseJSXAttributeValue()}e[t.type===d.JSXAttribute?"attributes":"directives"].push(t)}}return e},_parseJSXAttributeName:function(){var e=this.index;if(!y(this._charCode())){this._error("Unexpected identifier "+this._char())}while(this.index<this.length){var t=this._charCode();if(!y(t)){break}this._updateIndex()}var i=this.source.slice(e,this.index);if(v.isDirective(i)){return this._type(d.JSXDirective,{name:i})}return this._type(d.JSXAttribute,{name:i})},_parseJSXAttributeValue:function(){var e,t=this.options.delimiters;if(this._isExpect(t[0])){e=this._parseJSXExpressionContainer()}else{e=this._scanJSXStringLiteral()}return e},_parseJSXExpressionContainer:function(){var e,t=this.options.delimiters;this._expect(t[0]);if(this._isExpect(t[1])){e=this._parseJSXEmptyExpression()}else{e=this._parseExpression()}this._expect(t[1]);return this._type(d.JSXExpressionContainer,{value:e})},_parseJSXEmptyExpression:function(){return this._type(d.JSXEmptyExpression,{value:null})},_parseExpression:function(){return this._parseTemplate()},_parseJSXChildren:function(e){var t=[],i=e.value+">",n=null;switch(e.type){case d.JSXBlock:i="</b:"+i;break;case d.JSXVdt:i="</t:"+i;break;case d.JSXElement:default:i="</"+i;break}while(this.index<this.length){if(this._isExpect(i)){break}n=this._parseJSXChild(e,i,n);if(n){t.push(n)}}this._parseJSXClosingElement();return t},_parseJSXChild:function(e,t,i){var n,r=this.options.delimiters;if(this._isExpect(r[0])){n=this._parseJSXExpressionContainer()}else if(v.isTextTag(e.value)){n=this._scanJSXText([t,r[0]])}else if(this._isElementStart()){n=this._parseJSXElement()}else{n=this._scanJSXText([function(){return this._isExpect(t)||this._isElementStart()},r[0]])}if(n){n.prev=undefined;n.next=undefined;if(i){i.next=n;n.prev=i}}return n},_parseJSXClosingElement:function(){this._expect("</");while(this.index<this.length){if(!y(this._charCode())){break}this._updateIndex()}this._skipWhitespace();this._expect(">")},_parseJSXComment:function(){this._expect("!--");var e=this.index;while(this.index<this.length){if(this._isExpect("-->")){break}else if(this._charCode()===10){this._updateLine()}this._updateIndex()}var t=this._type(d.JSXComment,{value:this.source.slice(e,this.index)});this._expect("-->");return t},_char:function(e){arguments.length===0&&(e=this.index);return this.source.charAt(e)},_charCode:function(e){arguments.length===0&&(e=this.index);return this.source.charCodeAt(e)},_skipWhitespace:function(){while(this.index<this.length){var e=this._charCode();if(!v.isWhiteSpace(e)){break}else if(e===10){this._updateLine()}this._updateIndex()}},_expect:function(e){if(!this._isExpect(e)){this._error("expect string "+e)}this._updateIndex(e.length)},_isExpect:function(e){return this.source.slice(this.index,this.index+e.length)===e},_isElementStart:function(){return this._char()==="<"&&(this._isExpect("<!--")||m.test(this.source.slice(this.index)))},_type:function(e,t){t||(t={});t.type=e;t.typeName=p[e];t.line=this.line;t.column=this.column;return t},_updateLine:function(){this.line++;this.column=0},_updateIndex:function(e){e===undefined&&(e=1);var t=this.index;this.index=this.index+e;this.column=this.column+e;return t},_error:function(e){throw new Error(e+" At: {line: "+this.line+", column: "+this.column+'} Near: "'+this.source.slice(this.index-10,this.index+20)+'"')}};var g=_;var b=v.Type;var S=v.TypeName;var x=function(){var e={"class":"className","for":"htmlFor"};return function(t){return e[t]||t}}();var k=function(){};k.prototype={constructor:k,stringify:function(e,t){if(arguments.length===1){t=true}this.autoReturn=!!t;this.enterStringExpression=false;return this._visitJSXExpressionContainer(e,true)},_visitJSXExpressionContainer:function(e,t){var i="",n=e.length;v.each(e,function(e,r){if(this.autoReturn&&t&&r===n-1){i+="return "+this._visit(e,t)}else{i+=this._visit(e,t)}},this);if(!t&&!this.enterStringExpression){i="function() {try {return ["+i+"][0]} catch(e) {_e(e)}}.call(this)"}return i},_visit:function(e,t){e=e||{};switch(e.type){case b.JS:return this._visitJS(e,t);case b.JSXElement:return this._visitJSX(e);case b.JSXText:return this._visitJSXText(e);case b.JSXExpressionContainer:return this._visitJSXExpressionContainer(e.value);case b.JSXWidget:return this._visitJSXWidget(e);case b.JSXBlock:return this._visitJSXBlock(e);case b.JSXVdt:return this._visitJSXVdt(e,t);case b.JSXComment:return this._visitJSXComment(e);default:return"null"}},_visitJS:function(e){return this.enterStringExpression?"("+e.value+")":e.value},_visitJSX:function(e){if(e.value==="script"||e.value==="style"){if(e.children.length){e.attributes.push({type:b.JSXAttribute,typeName:S[b.JSXAttribute],name:"innerHTML",value:{type:b.JS,typeName:S[b.JS],value:this._visitJSXChildrenAsString(e.children)}});e.children=[]}}return this._visitJSXDirective(e,this._visitJSXElement(e))},_visitJSXElement:function(e){var t=this._visitJSXAttribute(e.attributes,true,true);return"h('"+e.value+"',"+t.props+", "+this._visitJSXChildren(e.children)+", "+t.className+", "+t.key+", "+t.ref+")"},_visitJSXChildren:function(e){var t=[];v.each(e,function(e){if(e._skip)return;t.push(this._visit(e))},this);return t.length>1?"["+t.join(", ")+"]":t[0]},_visitJSXDirective:function(e,t){var i={data:null,value:"value",key:"key"};v.each(e.directives,function(n){switch(n.name){case"v-if":t=this._visitJSXDirectiveIf(n,t,e);break;case"v-else-if":case"v-else":if(e._skip)break;throw new Error(n.name+" must be led with v-if. At: {line: "+e.line+", column: "+e.column+"}");case"v-for":i.data=this._visitJSXAttributeValue(n.value);break;case"v-for-value":i.value=this._visitJSXText(n.value,true);break;case"v-for-key":i.key=this._visitJSXText(n.value,true);break;default:break}},this);if(i.data){t=this._visitJSXDirectiveFor(i,t)}return t},_visitJSXDirectiveIf:function(e,t,i){var n=this._visitJSXAttributeValue(e.value)+" ? "+t+" : ",r=false,s=i,a=[],u=function(){v.each(a,function(e){e._skip=true});a=[]};while(s=s.next){if(s.type===v.Type.JSXText){if(!/^\s*$/.test(s.value))break;else a.push(s)}else if(s.type===v.Type.JSXElement||s.type===v.Type.JSXWidget){if(!s.directives||!s.directives.length)break;var o=false;for(var l=0,f=s.directives.length;l<f;l++){var c=s.directives[l],h=c.name;if(h==="v-else-if"){s._skip=true;n+=this._visitJSXAttributeValue(c.value)+" ? "+this._visit(s)+" : ";o=true;u();break}else if(h==="v-else"){s._skip=true;n+=this._visit(s);r=true;u();break}}if(!o)break}}if(!r)n+="undefined";return n},_visitJSXDirectiveFor:function(e,t){return"_Vdt.utils.map("+e.data+", function("+e.value+", "+e.key+") {\n"+"return "+t+";\n"+"}, this)"},_visitJSXChildrenAsString:function(e){var t=[];this.enterStringExpression=true;v.each(e,function(e){t.push(this._visit(e))},this);this.enterStringExpression=false;return t.join("+")},_visitJSXAttribute:function(e,t,i){var n=[],r,s,a;v.each(e,function(e){var u=x(e.name),o=this._visitJSXAttributeValue(e.value);if(u==="widget"&&e.value.type===b.JSXText){a="function(i) {widgets["+o+"] = i}";return}else if(u==="className"){if(e.value.type===b.JSXExpressionContainer){o="_Vdt.utils.className("+o+")"}if(t){r=o;return}}else if(u==="key"&&i){s=o;return}else if(u==="ref"&&i){a=o;return}n.push("'"+u+"': "+o)},this);return{props:n.length?"{"+n.join(", ")+"}":"null",className:r||"null",ref:a||"null",key:s||"null"}},_visitJSXAttributeValue:function(e){return v.isArray(e)?this._visitJSXChildren(e):this._visit(e)},_visitJSXText:function(e,t){var i=e.value.replace(/([\'\"\\])/g,"\\$1").replace(/[\r\n]/g,"\\n");if(!t){i="'"+i+"'"}return i},_visitJSXWidget:function(e){e.attributes.push({name:"children",value:e.children});var t=this._visitJSXAttribute(e.attributes,false,true);return this._visitJSXDirective(e,"h("+e.value+", "+t.props+", "+t.key+", "+t.ref+")")},_visitJSXBlock:function(e,t){arguments.length===1&&(t=true);return"(_blocks."+e.value+" = function(parent) {return "+this._visitJSXChildren(e.children)+";}) && (__blocks."+e.value+" = function(parent) {\n"+"var self = this;\n"+"return blocks."+e.value+" ? blocks."+e.value+".call(this, function() {\n"+"return _blocks."+e.value+".call(self, parent);\n"+"}) : _blocks."+e.value+".call(this, parent);\n"+"})"+(t?" && __blocks."+e.value+".call(this)":"")},_visitJSXVdt:function(e,t){var i=["(function(blocks) {","var _blocks = {}, __blocks = extend({}, blocks), _obj = "+this._visitJSXAttribute(e.attributes,false,false).props+" || {};",'if (_obj.hasOwnProperty("arguments")) { extend(_obj, _obj.arguments === null ? obj : _obj.arguments); delete _obj.arguments; }',"return "+e.value+".call(this, _obj, _Vdt, "].join("\n"),n=[];v.each(e.children,function(e){if(e.type===b.JSXBlock){n.push(this._visitJSXBlock(e,false))}},this);i+=(n.length?n.join(" && ")+" && __blocks)":"__blocks)")+"}).call(this, "+(t?"blocks)":"{})");return i},_visitJSXComment:function(e){return"hc("+this._visitJSXText(e)+")"}};var w=k;var E={};var J=(Object.freeze||Object)({"default":E});var X=J&&E||J;function C(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var A=C(X);var T=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var j=Object.prototype.toString;var N=typeof document==="undefined"?A:document;var L=Array.isArray||function(e){return j.call(e)==="[object Array]"};function O(e){return(typeof e==="undefined"?"undefined":T(e))==="object"&&e!==null}function V(e){var t=typeof e==="undefined"?"undefined":T(e);return t==="string"||t==="number"}function I(e){return e===null||e===undefined}function W(e){return e.substr(0,3)==="ev-"}var D=function(){if(Array.prototype.indexOf){return function(e,t){return e.indexOf(t)}}else{return function(e,t){for(var i=0;i<e.length;i++){if(e[i]===t){return i}}return-1}}}();var M=Object.create;var P=function(){if(M){return function(e){return M(e)}}else{return function(e){function t(){}t.prototype=e;return new t}}}();var B=typeof Map==="function"?Map:function(){function e(){this._keys=[];this._values=[];this.size=0}e.prototype.set=function(e,t){var i=D(this._keys,e);if(!~i){i=this._keys.push(e)-1;this.size++}this._values[i]=t;return this};e.prototype.get=function(e){var t=D(this._keys,e);if(!~t)return;return this._values[t]};e.prototype["delete"]=function(e){var t=D(this._keys,e);if(!~t)return false;this._keys.splice(t,1);this._values.splice(t,1);this.size--;return true};return e}();var F={key:true,ref:true,children:true,className:true};var z={muted:true,scoped:true,loop:true,open:true,checked:true,"default":true,capture:true,disabled:true,readOnly:true,required:true,autoplay:true,controls:true,seamless:true,reversed:true,allowfullscreen:true,novalidate:true,hidden:true,autoFocus:true,selected:true};var H={volume:true,defaultChecked:true};function K(){this.queue=[]}K.prototype.push=function(e){this.queue.push(e)};K.prototype.trigger=function(){var e=this.queue;var t=void 0;while(t=e.shift()){t()}};var $={};if(typeof navigator!=="undefined"){var q=navigator.userAgent;var R=q.indexOf("MSIE ");if(~R){$.isIE=true;var U=parseInt(q.substring(R+5,q.indexOf(".",R)),10);$.version=U;$.isIE8=U===8}}var Y=$.isIE8?function(e,t){e.innerText=t}:function(e,t){e.textContent=t};var Z={Text:1,HtmlElement:2,ComponentClass:4,ComponentFunction:8,HtmlComment:16};Z.Element=Z.HtmlElement;Z.Component=Z.ComponentClass|Z.ComponentFunction;Z.TextElement=Z.Text|Z.HtmlComment;var G={};if("production"!=="production"&&!$.isIE){Object.freeze(G)}function Q(e,t,i,n,r,s,a){this.type=e;this.tag=t;this.props=i;this.children=n;this.key=s||i.key;this.ref=a||i.ref;this.className=r||i.className}function ee(e,t,i,n,r,s){var a=void 0;t||(t=G);switch(typeof e==="undefined"?"undefined":T(e)){case"string":a=Z.HtmlElement;break;case"function":if(e.prototype.init){a=Z.ComponentClass}else{a=Z.ComponentFunction}break;default:throw new Error("unknown vNode type: "+e)}if(t.children){t.children=ne(t.children)}return new Q(a,e,t,ne(i),n,r,s)}function te(e){return new Q(Z.HtmlComment,null,G,e)}function ie(e){return new Q(Z.Text,null,G,e)}function ne(e){if(L(e)){var t=se(e,{index:0});return t.length?t:null}return e}function re(e,t){if(I(e.key)){e.key=".$"+t.index++}return e}function se(e,t){var i=void 0;for(var n=0;n<e.length;n++){var r=e[n];if(I(r)){if(!i){i=e.slice(0,n)}}else if(L(r)){if(!i){i=e.slice(0,n)}i=i.concat(se(r,t))}else if(V(r)){if(!i){i=e.slice(0,n)}i.push(re(ie(r),t))}else if(r.type){if(!i){i=e.slice(0,n)}i.push(re(r,t))}}return i||e}var ae=["altKey","bubbles","cancelable","ctrlKey","eventPhase","metaKey","relatedTarget","shiftKey","target","timeStamp","type","view","which"];var ue=["char","charCode","key","keyCode"];var oe=["button","buttons","clientX","clientY","layerX","layerY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement"];var le=/^key|input/;var fe=/^(?:mouse|pointer|contextmenu)|click/;function ce(e){for(var t=0;t<ae.length;t++){var i=ae[t];this[i]=e[i]}if(!e.target){this.target=e.srcElement}this._rawEvent=e}ce.prototype.preventDefault=function(){var e=this._rawEvent;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}};ce.prototype.stopPropagation=function(){var e=this._rawEvent;e.cancelBubble=true;e.stopImmediatePropagation&&e.stopImmediatePropagation()};function he(e){ce.call(this,e);for(var t=0;t<oe.length;t++){var i=oe[t];this[i]=e[i]}}he.prototype=P(ce.prototype);he.prototype.constructor=he;function ve(e){ce.call(this,e);for(var t=0;t<ue.length;t++){var i=ue[t];this[i]=e[i]}}ve.prototype=P(ce.prototype);ve.prototype.constructor=ve;function de(e){if(le.test(e.type)){return new ve(e)}else if(fe.test(e.type)){return new he(e)}else{return new ce(e)}}var pe=void 0;var me=void 0;if("addEventListener"in N){pe=function _t(e,t){N.addEventListener(e,t,false)};me=function gt(e,t){N.removeEventListener(e,t)}}else{pe=function bt(e,t){N.attachEvent("on"+e,t)};me=function St(e,t){N.detachEvent("on"+e,t)}}var ye={};function _e(e,t,i,n){var r=ye[e];if(i){if(!r){r={items:new B,docEvent:null};r.docEvent=be(e,r);ye[e]=r}r.items.set(n,i)}else if(r){var s=r.items;if(s["delete"](n)){if(s.size===0){me(e,r.docEvent);delete r[e]}}}}function ge(e,t,i,n,r){var s=i.get(t);if(s){n--;e.currentTarget=t;s(e);if(e._rawEvent.cancelBubble){return}}if(n>0){var a=t.parentNode;if(I(a)||r&&a.nodeType===1&&a.disabled){return}ge(e,a,i,n,r)}}function be(e,t){var i=function n(e){var i=t.items.size;e||(e=window.event);if(i>0){e=de(e);ge(e,e.target,t.items,i,e.type==="click")}};pe(e,i);return i}function Se(e,t){if(I(e))return;var i=new K;var n=xe(e,t,i);i.trigger();return n}function xe(e,t,i){var n=e.type;if(n&Z.HtmlElement){return ke(e,t,i)}else if(n&Z.Text){return we(e,t)}else if(n&Z.ComponentClass){return Ee(e,t,i)}else if(n&Z.ComponentFunction){return Je(e,t,i)}else if(n&Z.HtmlComment){return Xe(e,t)}else{throw new Error("unknown vnode type "+n)}}function ke(e,t,i){var n=N.createElement(e.tag);var r=e.children;var s=e.ref;var a=e.props;var u=e.className;e.dom=n;if(!I(r)){Ae(r,n,i)}if(!I(u)){n.className=u}if(a!==G){for(var o in a){Ze(o,null,a[o],n)}}if(!I(s)){De(n,s,i)}if(t){t.appendChild(n)}return n}function we(e,t){var i=N.createTextNode(e.children);e.dom=i;if(t){t.appendChild(i)}return i}function Ee(e,t,i,n){var r=e.props;var s=new e.tag(r);var a=s.init(n,e);var u=r.ref;e.dom=a;e.children=s;if(t){t.appendChild(a)}if(typeof s.mount==="function"){i.push(function(){return s.mount(n,e)})}if(typeof u==="function"){u(s)}return a}function Je(e,t,i){var n=e.props;var r=e.ref;Ce(e);var s=xe(e.children,null,i);e.dom=s;if(t){t.appendChild(s)}if(r){De(s,r,i)}return s}function Xe(e,t){var i=N.createComment(e.children);e.dom=i;if(t){t.appendChild(i)}return i}function Ce(e){var t=e.tag(e.props);if(L(t)){throw new Error("ComponentFunction "+e.tag.name+" returned a invalid vNode")}else if(V(t)){t=ie(t)}e.children=t;return e}function Ae(e,t,i){if(V(e)){Y(t,e)}else if(L(e)){for(var n=0;n<e.length;n++){xe(e[n],t,i)}}else{xe(e,t,i)}}function Te(e,t){if(I(e)){return}else if(L(e)){for(var i=0;i<e.length;i++){je(e[i],t)}}else{je(e,t)}}function je(e,t){var i=e.type;if(i&Z.Element){return Ne(e,t)}else if(i&Z.TextElement){return Le(e,t)}else if(i&Z.ComponentClass){return Ve(e,t)}else if(i&Z.ComponentFunction){return Oe(e,t)}}function Ne(e,t){var i=e.ref;var n=e.props;var r=e.dom;if(i){i(null)}Te(e.children,null);for(var s in n){var a=n[s];if(!I(a)&&W(s)){_e(s.substr(0,3),a,null,r)}}if(t){t.removeChild(r)}}function Le(e,t){if(t){t.removeChild(e.dom)}}function Oe(e,t){var i=e.ref;if(i){i(null)}je(e.children,t)}function Ve(e,t,i){var n=e.children;var r=e.ref;if(typeof n.destroy==="function"){n.destroy(e,i)}if(r){r(null)}Te(e.props.children,null);if(t){t.removeChild(e.dom)}}function Ie(e,t){Y(e,"");Te(t)}function We(e,t,i){if(!e)e=i.parentNode;e.replaceChild(t,i)}function De(e,t,i){if(typeof t==="function"){i.push(function(){return t(e)})}else{throw new Error('ref must be a function, but got "'+JSON.stringify(t)+'"')}}function Me(e,t,i){var n=new K;var r=Pe(e,t,i,n);n.trigger();return r}function Pe(e,t,i,n){if(e!==t){var r=t.type;var s=e.type;if(r&Z.Element){if(s&Z.Element){Be(e,t,i,n)}else{Re(e,t,i,n)}}else if(r&Z.TextElement){if(s&Z.TextElement){Ue(e,t)}else{Re(e,t,i,n)}}else if(r&Z.ComponentClass){if(s&Z.ComponentClass){Fe(e,t,i,n)}else{Re(e,t,i,n)}}else if(r&Z.ComponentFunction){if(s&Z.ComponentFunction){ze(e,t,i,n)}else{Re(e,t,i,n)}}}return t.dom}function Be(e,t,i,n){var r=e.dom;var s=e.props;var a=t.props;var u=e.children;var o=t.children;var l=t.ref;var f=e.className;var c=t.className;t.dom=r;if(e.tag!==t.tag){Re(e,t,i,n)}else{if(u!==o){He(u,o,r,n)}if(s!==a){Ye(e,t)}if(f!==c){if(I(c)){r.removeAttribute("class")}else{r.className=c}}if(!I(l)&&e.ref!==l){De(r,l,n)}}}function Fe(e,t,i,n){var r=e.tag;var s=t.tag;var a=e.dom;var u=void 0;var o=void 0;if(r!==s||e.key!==t.key){o=Ee(t,null,n,e);Ve(e,null,t)}else{u=e.children;o=u.update(e,t);t.dom=o}if(a!==o){We(i,o,a)}}function ze(e,t,i,n){var r=e.tag;var s=t.tag;if(e.key!==t.key){je(e.children,i);Je(t,i,n)}else{t.dom=e.dom;Ce(t);Pe(e.children,t.children,i,n)}}function He(e,t,i,n){if(I(e)){if(!I(t)){Ae(t,i,n)}}else if(I(t)){Te(e,i)}else if(V(t)){if(V(e)){i.firstChild.nodeValue=t}else{Te(e,i);Y(i,t)}}else if(L(e)){if(L(t)){Ke(e,t,i,n)}else{Te(e,i);xe(t,i,n)}}else if(L(t)){je(e,i);Ae(t,i,n)}else if(V(e)){Y(i,"");xe(t,i)}else{Pe(e,t,i,n)}}function Ke(e,t,i,n){var r=e.length;var s=t.length;var a=r-1;var u=s-1;var o=0;var l=0;var f=void 0;var c=void 0;var h=void 0;var v=void 0;var d=void 0;var p=void 0;var m=void 0;var y=e[o];var _=t[l];var g=e[a];var b=t[u];e:while(true){while(y.key===_.key){Pe(y,_,i,n);++o;++l;if(o>a||l>u){break e}y=e[o];_=t[l]}while(g.key===b.key){Pe(g,b,i,n);--a;--u;if(a<o||u<l){break e}g=e[a];b=t[u]}if(g.key===_.key){Pe(g,_,i,n);i.insertBefore(_.dom,y.dom);--a;++l;g=e[a];_=t[l];continue}if(y.key===b.key){Pe(y,b,i,n);qe(u,s,b.dom,t,i);++o;--u;y=e[o];b=t[u];continue}break}if(o>a){while(l<=u){qe(u,s,xe(t[l],null,n),t,i);++l}}else if(l>u){while(o<=a){je(e[o],i);++o}}else{r=a-o+1;s=u-l+1;var S=new Array(s);for(f=0;f<s;f++){S[f]=-1}var x=false;var k=0;var w=0;if(s<=4||r*s<=16){for(f=o;f<=a;f++){h=e[f];if(w<s){for(c=l;c<=u;c++){v=t[c];if(h.key===v.key){S[c-l]=f;if(k>c){x=true}else{k=c}Pe(h,v,i,n);++w;e[f]=null;break}}}}}else{var E={};for(f=l;f<=u;f++){E[t[f].key]=f}for(f=o;f<=a;f++){h=e[f];if(w<s){c=E[h.key];if(c!==undefined){v=t[c];S[c-l]=f;if(k>c){x=true}else{k=c}Pe(h,v,i,n);++w;e[f]=null}}}}if(r===e.length&&w===0){Ie(i,e);while(l<s){xe(t[l],i,n);++l}}else{if(x){var J=$e(S);c=J.length-1;for(f=s-1;f>=0;f--){if(S[f]===-1){k=f+l;qe(k,t.length,xe(t[k],null,n),t,i)}else{if(c<0||f!==J[c]){k=f+l;qe(k,t.length,t[k].dom,t,i)}else{--c}}}}else if(w!==s){for(f=s-1;f>=0;f--){if(S[f]===-1){k=f+l;qe(k,t.length,xe(t[k],null,n),t,i)}}}f=r-w;while(f>0){h=e[o++];if(h!==null){je(h,i);--f}}}}}function $e(e){var t=e.slice(0);var i=[0];var n=void 0;var r=void 0;var s=void 0;var a=void 0;var u=void 0;var o=e.length;for(n=0;n<o;n++){var l=e[n];if(l===-1){continue}r=i[i.length-1];if(e[r]<l){t[n]=r;i.push(n);continue}s=0;a=i.length-1;while(s<a){u=(s+a)/2|0;if(e[i[u]]<l){s=u+1}else{a=u}}if(l<e[i[s]]){if(s>0){t[n]=i[s-1]}i[s]=n}}s=i.length;a=i[s-1];while(s-->0){i[s]=a;a=t[a]}return i}function qe(e,t,i,n,r){var s=e+1;if(s<t){r.insertBefore(i,n[s].dom)}else{r.appendChild(i)}}function Re(e,t,i,n){if(!i)i=e.dom.parentNode;je(e,null);xe(t,null,n);i.replaceChild(t.dom,e.dom)}function Ue(e,t,i){var n=t.children;var r=e.dom;t.dom=r;if(e.children!==n){r.nodeValue=n}}function Ye(e,t){var i=e.props;var n=t.props;var r=t.dom;var s=void 0;if(n!==G){for(s in n){Ze(s,i[s],n[s],r)}}if(i!==G){for(s in i){if(!(s in n)){Ge(s,i[s],r)}}}}function Ze(e,t,i,n){if(t!==i){if(F[e]){return}else if(z[e]){n[e]=!!i}else if(H[e]){var r=I(i)?"":i;if(n[e]!==r){n[e]=r}}else if(I(i)){Ge(e,t,n)}else if(W(e)){_e(e.substr(3),t,i,n)}else if(O(i)){et(e,t,i,n)}else if(e==="innerHTML"){n.innerHTML=i}else{n.setAttribute(e,i)}}}function Ge(e,t,i){if(!I(t)){switch(e){case"value":i.value="";return;case"style":i.removeAttribute("style");return;case"attributes":for(var n in t){i.removeAttribute(n)}return;case"dataset":Qe(t,i);return;default:break}if(z[e]){i[e]=false}else if(W(e)){_e(e.substr(3),t,null,i)}else if(O(t)){var r=i[e];try{i[e]=undefined;delete i[e]}catch(s){for(var a in t){delete r[a]}}}else{i.removeAttribute(e)}}}var Qe=$.isIE?function(e,t){for(var i in e){t.removeAttribute("data-"+nt(i))}}:function(e,t){var i=t.dataset;for(var n in e){delete i[n]}};function et(e,t,i,n){if(t&&!O(t)&&!I(t)){Ge(e,t,n);t=null}switch(e){case"attributes":return st(t,i,n);case"style":return at(t,i,n);case"dataset":return tt(e,t,i,n);default:return rt(e,t,i,n)}}var tt=$.isIE?function xt(e,t,i,n){var r={};var s=void 0;var a=void 0;for(s in i){var u="data-"+nt(s);a=i[s];if(I(a)){n.removeAttribute(u);r[s]=true}else{n.setAttribute(u,a)}}if(!I(t)){for(s in t){if(I(i[s])&&!r[s]){n.removeAttribute("data-"+nt(s))}}}}:rt;var it={};function nt(e){if(!it[e]){it[e]=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}return it[e]}function rt(e,t,i,n){var r=n[e];if(I(r)){r=n[e]={}}var s=void 0;var a=void 0;for(s in i){r[s]=i[s]}if(!I(t)){for(s in t){if(I(i[s])){delete r[s]}}}}function st(e,t,i){var n={};var r=void 0;var s=void 0;for(r in t){s=t[r];if(I(s)){i.removeAttribute(r);n[r]=true}else{i.setAttribute(r,s)}}if(!I(e)){for(r in e){if(I(t[r])&&!n[r]){i.removeAttribute(r)}}}}function at(e,t,i){var n=i.style;var r={};var s=void 0;var a=void 0;for(s in t){a=t[s];if(I(a)){n[s]="";r[s]=true}else{n[s]=a}}if(!I(e)){for(s in e){if(I(t[s])&&!r[s]){n[s]=""}}}}var ut=ee;var ot=Me;var lt=Se;var ft=te;var ct={h:ut,patch:ot,render:lt,hc:ft};var ht=new g;var vt=new w;var dt=function(e,t){if(!(this instanceof dt))return new dt(e,t);this.template=pt(e,t);this.data=null;this.vNode=null;this.node=null;this.widgets={}};dt.prototype={constructor:dt,render:function(e){this.renderVNode(e);this.node=ct.render(this.vNode);return this.node},renderVNode:function(e){if(e!==undefined){this.data=e}this.vNode=this.template(this.data,dt);return this.vNode},renderString:function(e){var t=this.render(e);return t.outerHTML||t.toString()},update:function(e){var t=this.vNode;this.renderVNode(e);this.node=ct.patch(t,this.vNode);return this.node}};function pt(e,t){var i;if(t===true||t===false){t={autoReturn:t}}t=v.extend({},v.configure(),t);switch(typeof e){case"string":var n=ht.parse(e,{delimiters:t.delimiters}),r=vt.stringify(n,t.autoReturn);r=["_Vdt || (_Vdt = Vdt);","obj || (obj = {});","blocks || (blocks = {});","var h = _Vdt.miss.h, hc = _Vdt.miss.hc, widgets = this && this.widgets || {}, _blocks = {}, __blocks = {},","extend = _Vdt.utils.extend, _e = _Vdt.utils.error,"+(t.server?'require = function(file) { return _Vdt.utils.require(file, "'+t.filename.replace(/\\/g,"\\\\")+'") }, ':"")+"self = this.data, scope = obj;",t.noWith?r:["with (obj) {",r,"}"].join("\n")].join("\n");i=t.onlySource?function(){}:new Function("obj","_Vdt","blocks",r);i.source="function(obj, _Vdt, blocks) {\n"+r+"\n}";break;case"function":i=e;break;default:throw new Error("Expect a string or function")}return i}dt.parser=ht;dt.stringifier=vt;dt.miss=ct;dt.compile=pt;dt.utils=v;dt.setDelimiters=v.setDelimiters;dt.getDelimiters=v.getDelimiters;dt.virtualDom=ct;var mt=dt;var yt=mt;return yt})});var n=(Object.freeze||Object)({"default":i,__moduleExports:i});var r=n&&i||n;function s(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var a=s(r);var u=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();var f=a.utils.extend;var c=a.utils.isArray;var h=a.utils.each;var v=a.utils.isObject;function d(e,t){var i=function n(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++){i[r]=arguments[r]}if(!this||!(this instanceof n||this.prototype instanceof n)){return e.apply(n,i)}return e.apply(this,i)};i.prototype=m(e.prototype);h(t,function(t,n){if(n==="displayName"){i.displayName=t}if(!_(t)||n==="template"){return i.prototype[n]=t}i.prototype[n]=function(){var i=function s(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++){i[r]=arguments[r]}return e.prototype[n].apply(this,i)},r=function a(t){
return e.prototype[n].apply(this,t)};return function(){var e=this||{},n=e._super,s=e._superApply,a=void 0;e._super=i;e._superApply=r;for(var u=arguments.length,o=Array(u),l=0;l<u;l++){o[l]=arguments[l]}a=t.apply(this,o);e._super=n;e._superApply=s;return a}}()});i.__super=e.prototype;i.prototype.constructor=i;f(i,e);return i}var p=Object.create;function m(e){if(p){return p(e)}else{var t=function i(){};t.prototype=e;return new t}}var y=Object.prototype.hasOwnProperty;function _(e){return typeof e==="function"}function g(e,t,i){var n=e==null?undefined:e[t];if(n===undefined){n=i}return _(n)?n.call(e):n}var b=Object.prototype.toString;var S=function Y(e,t,i,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return e===t;var r=b.call(e);if(r!==b.call(t))return false;switch(r){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":if(+e!==+e)return+t!==+t;return+e===0?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s=r==="[object Array]";if(!s){if((typeof e==="undefined"?"undefined":u(e))!="object"||(typeof t==="undefined"?"undefined":u(t))!="object")return false;var a=e.constructor,o=t.constructor;if(a!==o&&!(_(a)&&a instanceof a&&_(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t){return false}}i=i||[];n=n||[];var l=i.length;while(l--){if(i[l]===e)return n[l]===t}i.push(e);n.push(t);if(s){l=e.length;if(l!==t.length)return false;while(l--){if(!Y(e[l],t[l],i,n))return false}}else{var f=E(e),c;l=f.length;if(E(t).length!==l)return false;while(l--){c=f[l];if(!(y.call(t,c)&&Y(e[c],t[c],i,n)))return false}}i.pop();n.pop();return true};function x(e,t){return S(e,t)}var k=0;function w(e){var t=++k+"";return e?e+t:t}var E=Object.keys||function(e){var t=[];h(e,function(e,i){return t.push(i)});return t};function J(e){var t=[];h(e,function(e){return t.push(e)});return t}var X={};var C=/^\./;var A=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var T=/\\(\\)?/g;var j=/^(?:0|[1-9]\d*)$/;function N(e){if(typeof e!=="string")return e;if(X[e])return X[e];var t=[];if(C.test(e)){g.push("")}e.replace(A,function(i,n,r,s){t.push(r?e.replace(T,"$1"):n||i)});X[e]=t;return t}function L(e){return(typeof e==="number"||j.test(e))&&e>-1&&e%1===0}function O(e,t,i){if(y.call(e,t))return e[t];t=N(t);var n=0,r=t.length;while(e!=null&&n<r){e=e[t[n++]]}return n&&n===r?e:i}function V(e,t,i){if(y.call(e,t)){e[t]=i;return e}t=N(t);var n=-1,r=t.length,s=r-1,a=e;while(a!=null&&++n<r){var u=t[n],o=i;if(n!==s){var l=a[u];o=v(l)?l:L(t[n+1])?[]:{}}a[u]=o;a=a[u]}return e}var I=function(){function e(t){var i=this;o(this,e);if(!this.template){throw new Error("Can not instantiate when this.template does not exist.")}t=f({},g(this,"defaults"),t);this._events={};this.attributes={};this.vdt=a(this.template);this.set(t,{silent:true});this.widgets=this.vdt.widgets||{};this._widget=this.attributes.widget||w("widget");this.inited=false;this.rendered=false;this.mounted=false;this.displayName=this.displayName;this.addEvents();var n=function s(){i.inited=true;i.on("change",function(){return i.update()});i.trigger("inited",i)};var r=this._init();if(r&&r.then){r.then(n)}else{n()}}l(e,[{key:"addEvents",value:function t(){var e=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.attributes;h(t,function(t,i){if(i.substr(0,3)==="ev-"&&_(t)){e.on(i.substr(3),t)}})}},{key:"_init",value:function i(e){}},{key:"_create",value:function n(e,t){}},{key:"_mount",value:function r(e,t){}},{key:"_beforeUpdate",value:function s(e,t){}},{key:"_update",value:function c(e,t){}},{key:"_destroy",value:function v(e,t){}},{key:"init",value:function d(e,t){var i=this;if(!this.inited){var n=document.createComment("placeholder");this.one("inited",function(){var e=n.parentNode;if(e){e.replaceChild(i.init(),n)}});return n}this.element=this.vdt.render(this);this.rendered=true;this.trigger("rendered",this);this._create(e,t);return this.element}},{key:"mount",value:function p(e,t){this.mounted=true;this.trigger("mounted",this);this._mount(e,t)}},{key:"update",value:function m(e,t){this._beforeUpdate(e,t);this.element=this.vdt.update(this);this._update(e,t);return this.element}},{key:"destroy",value:function y(e,t){this.off();this._destroy(e,t)}},{key:"get",value:function b(e,t){if(e===undefined)return this.attributes;return O(this.attributes,e,t)}},{key:"set",value:function S(e,t,i){var n=this;if(e==null)return this;var r=this.attributes,s=[];if((typeof e==="undefined"?"undefined":u(e))==="object"){i=t;for(var a in e){t=e[a];if(!x(r[a],t)){s.push(a)}r[a]=t}}else{if(!x(O(r,e),t)){var o=N(e);s.push(e);if(o.length>1)s.push(o[0])}V(r,e,t)}i=f({silent:false,global:true,async:false},i);if(s.length){for(var l=0,c=s.length;l<c;l++){var h=s[l],v=O(r,h),d="change:"+h;i[d]&&i[d].call(this,v);!i.silent&&this.trigger(d,this,v)}if(i.change)i.change.call(this,s);if(!i.silent){this.trigger("beforeChange",this,s);if(i.global){clearTimeout(this._asyncUpdate);var p=function m(){n.trigger("change",n,s);for(var e=0,t=s.length;e<t;e++){var a=s[e],u=O(r,a),o="changed:"+a;if(i[o])i[o].call(n,u);n.trigger(o,n,u)}};if(i.async){this._asyncUpdate=setTimeout(p)}else{p()}}}}return this}},{key:"on",value:function k(e,t){(this._events[e]||(this._events[e]=[])).push(t);return this}},{key:"one",value:function E(e,t){var i=this;var n=function r(){for(var n=arguments.length,s=Array(n),a=0;a<n;a++){s[a]=arguments[a]}t.apply(i,s);i.off(e,r)};this.on(e,n);return this}},{key:"off",value:function J(e,t){if(e===undefined){this._events={};return this}var i=this._events[e];if(!i)return this;if(t===undefined){delete this._events[e];return this}for(var n,r=0;r<i.length;r++){n=i[r];if(n===t){i.splice(r,1);r--}}return this}},{key:"trigger",value:function X(e){var t=this._events[e];if(t){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++){n[r-1]=arguments[r]}for(var s=0,a=t.length;s<a;s++){t[s].apply(this,n)}}return this}}]);return e}();I.extend=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.defaults=f({},this.prototype.defaults,e.defaults);return d(this,e)};I.mount=function(e,t){if(e.prototype&&(e.prototype instanceof I||e===I)){e=new e}if(e.rendered){t.appendChild(e.element)}else if(e.inited){t.appendChild(e.init())}else{e.one("inited",function(){return t.appendChild(e.init())})}return e};var W=I.extend({displayName:"Animate",defaults:{tagName:"div",transition:"animate"},template:a.compile('return h(self.get("tagName"), self.extend({}, self.get()), self.values(self.childrenMap))',{autoReturn:false,noWith:true}),_init:function Z(){this.key=this.get("key");this.childrenMap=D(this.children);this.currentKeys={};this.keysToEnter=[];this.keysToLeave=[]},extend:f,values:J,_beforeUpdate:function G(e){if(!e)return;var t=D(this.children),i=e.childrenMap;this.childrenMap=M(i,t);h(t,function(e,n){if(t[n]&&!i.hasOwnProperty(n)&&!this.currentKeys[n]){this.keysToEnter.push(n)}},this);h(i,function(e,n){if(i[n]&&!t.hasOwnProperty(n)&&!this.currentKeys[n]){this.keysToLeave.push(n)}},this)},_update:function Q(e){if(!e)return;var t=this.keysToEnter;this.keysToEnter=[];h(t,this.performEnter,this);var i=this.keysToLeave;this.keysToLeave=[];h(i,this.performLeave,this)},performEnter:function ee(e){var t=this;var i=this.childrenMap[e].widget;this.currentKeys[e]=true;if(i&&i.enter){i.enter(function(){return t._doneEntering(e)})}else{this._doneEntering(e)}},performLeave:function te(e){var t=this;var i=this.childrenMap[e].widget;this.currentKeys[e]=true;if(i&&i.leave){i.leave(function(){return t._doneLeaving(e)})}else{this._doneLeaving(e)}},_doneEntering:function ie(e){delete this.currentKeys[e];var t=D(this.children);if(!t[e]){this.performLeave(e)}},_doneLeaving:function ne(e){delete this.currentKeys[e];var t=D(this.children);if(t&&t[e]){this.performEnter(e)}else{delete this.childrenMap[e];this.vdt.update()}},enter:function re(e){var t=this.get("transition"),i=this.element;P(i,t+"-enter");R.one(i,function(n){n&&n.stopPropagation();F(i,t+"-enter");F(i,t+"-enter-active");e()});i.offsetWidth;P(i,t+"-enter-active")},leave:function se(e){var t=this.get("transition"),i=this.element;P(i,t+"-leave");R.one(i,function(n){n&&n.stopPropagation();F(i,t+"-leave");F(i,t+"-leave-active");e()});i.offsetWidth;P(i,t+"-leave-active")}});function D(e,t,i){if(!e){return e}t=t||{};i=i||"$0";h(e,function(e,n){n="$"+n;if(e&&(e.type==="Widget"||e.type==="Thunk")){t[e.key||n]=e}else if(c(e)){D(e,t,""+i+n)}else{t[""+i+n]=e}});return t}function M(e,t){e=e||{};t=t||{};function i(i){if(t.hasOwnProperty(i)){return t[i]}else{return e[i]}}var n={};var r=[];for(var s in e){if(t.hasOwnProperty(s)){if(r.length){n[s]=r;r=[]}}else{r.push(s)}}var a={};for(var u in t){if(n.hasOwnProperty(u)){for(var o=0;o<n[u].length;o++){var l=n[u][o];var f=i(l);a[n[u][o]]=i(l)}}a[u]=i(u)}for(var c=0;c<r.length;c++){a[r[c]]=i(r[c])}return a}function P(e,t){if(t){if(e.classList){e.classList.add(t)}else if(!B(e,t)){e.className+=" "+t}}return e}function B(e,t){if(e.classList){return!!t&&e.className.contains(t)}return(" "+e.className+" ").indexOf(" "+t+" ")>-1}function F(e,t){if(t){if(e.classList){e.classList.remove(t)}else if(B(e,t)){e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}}}var z={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}};var H=[];function K(){var e=document.createElement("div");var t=e.style;if(!("AnimationEvent"in window)){delete z.animationend.animation}if(!("TransitionEvent"in window)){delete z.transitionend.transition}for(var i in z){var n=z[i];for(var r in n){if(r in t){H.push(n[r]);break}}}}K();function $(e,t,i){e.addEventListener(t,i,false)}function q(e,t,i){e.removeEventListener(t,i,false)}var R={on:function ae(e,t){if(H.length===0){window.setTimeout(t,0);return}H.forEach(function(i){$(e,i,t)})},off:function ue(e,t){if(H.length===0){return}H.forEach(function(i){q(e,i,t)})},one:function oe(e,t){var i=function n(){t.apply(this,arguments);R.off(e,n)};R.on(e,i)}};I.prototype.Animate=W;I.Animate=W;I.Vdt=a;var U=I;return U});