(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.Intact=t()})(this,function(){"use strict";var e={};var t=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=Object.prototype.toString;var n=typeof document==="undefined"?e:document;var r=Array.isArray||function(e){return i.call(e)==="[object Array]"};function s(e){return(typeof e==="undefined"?"undefined":t(e))==="object"&&e!==null}function a(e){var i=typeof e==="undefined"?"undefined":t(e);return i==="string"||i==="number"}function u(e){return e===null||e===undefined}function o(e){return e&&typeof e.init==="function"}function l(e){return e.substr(0,3)==="ev-"}var f=function(){if(Array.prototype.indexOf){return function(e,t){return e.indexOf(t)}}else{return function(e,t){for(var i=0;i<e.length;i++){if(e[i]===t){return i}}return-1}}}();var c=Object.create;var h=function(){if(c){return function(e){return c(e)}}else{return function(e){function t(){}t.prototype=e;return new t}}}();var d=typeof Map==="function"?Map:function(){function e(){this._keys=[];this._values=[];this.size=0}e.prototype.set=function(e,t){var i=f(this._keys,e);if(!~i){i=this._keys.push(e)-1;this.size++}this._values[i]=t;return this};e.prototype.get=function(e){var t=f(this._keys,e);if(!~t)return;return this._values[t]};e.prototype.delete=function(e){var t=f(this._keys,e);if(!~t)return false;this._keys.splice(t,1);this._values.splice(t,1);this.size--;return true};return e}();var v={key:true,ref:true,children:true,className:true,checked:true,multiple:true,defaultValue:true};var p={muted:true,scoped:true,loop:true,open:true,checked:true,default:true,capture:true,disabled:true,readOnly:true,required:true,autoplay:true,controls:true,seamless:true,reversed:true,allowfullscreen:true,novalidate:true,hidden:true,autoFocus:true,selected:true};var _={volume:true,defaultChecked:true,value:true};function m(){this.queue=[]}m.prototype.push=function(e){this.queue.push(e)};m.prototype.trigger=function(){var e=this.queue;var t=void 0;while(t=e.shift()){t()}};var g={};if(typeof navigator!=="undefined"){var y=navigator.userAgent;var b=y.indexOf("MSIE ");if(~b){g.isIE=true;var S=parseInt(y.substring(b+5,y.indexOf(".",b)),10);g.version=S;g.isIE8=S===8}}var k=g.isIE8?function(e,t){e.innerText=t}:function(e,t){e.textContent=t};var x=0;var E={JS:x++,JSXText:x++,JSXElement:x++,JSXExpressionContainer:x++,JSXAttribute:x++,JSXEmptyExpression:x++,JSXWidget:x++,JSXVdt:x++,JSXBlock:x++,JSXComment:x++,JSXDirective:x++};var w=[];for(var J in E){w[E[J]]=J}var X={area:true,base:true,br:true,col:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,menuitem:true,meta:true,param:true,source:true,track:true,wbr:true};var C={style:true,script:true,textarea:true};var A={"v-if":true,"v-else-if":true,"v-else":true,"v-for":true,"v-for-value":true,"v-for-key":true};var N={autoReturn:true,onlySource:false,delimiters:["{","}"],noWith:false,server:false,skipWhitespace:false,setModel:function e(t,i,n){t[i]=n},getModel:function e(t,i){return t[i]}};var T=Object.prototype.hasOwnProperty;var j=function e(){};function V(e){if(u(e))return false;var t=e.length;return typeof t==="number"&&t>-1&&t%1===0&&t<=9007199254740991&&typeof e!=="function"}function M(e,t,i){if(V(e)){for(var n=0,r=e.length;n<r;n++){t.call(i,e[n],n,e)}}else if(I(e)){for(var s in e){if(T.call(e,s)){t.call(i,e[s],s,e)}}}}function I(e){var i=typeof e==="undefined"?"undefined":t(e);return i==="function"||i==="object"&&!!e}function O(e,t,i){var n=[];M(e,function(e,r,s){n.push(t.call(i,e,r,s))});return n}function L(e){if(u(e))return;if(typeof e==="string")return e;var t=[];for(var i in e){if(T.call(e,i)&&e[i]){t.push(i)}}return t.join(" ")}function D(e){return e<=160&&e>=9&&e<=13||e==32||e==160||e==5760||e==6158||e>=8192&&(e<=8202||e==8232||e==8233||e==8239||e==8287||e==12288||e==65279)}function W(e){var t=e.length;while(t--&&D(e.charCodeAt(t))){}return e.slice(0,t+1)}function $(e){var t=e.length,i=-1;while(i++<t&&D(e.charCodeAt(i))){}return e.slice(i)}function B(e){if(!r(e)){throw new Error('The parameter must be an array like ["{{", "}}"]')}N.delimiters=e}function R(){return N.delimiters}function F(e){if(e!==undefined){q(N,e)}return N}function z(e){return X[e]}function H(e){return C[e]}function U(e){return T.call(A,e)}function q(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++){t[i]=arguments[i]}var n=t[0];var r=t.length;if(r>1){for(var s=1;s<r;s++){var a=t[s];if(a){for(var u in a){if(T.call(a,u)){n[u]=a[u]}}}}}return n}function P(e,t,i,n,s){var a=N.getModel(e,t),u=s.target.checked;if(r(a)){a=a.slice(0);if(u){a.push(i)}else{var o=f(a,i);if(~o){a.splice(o,1)}}}else{a=u?i:n}N.setModel(e,t,a)}function Q(e,t,i){var n=N.getModel(e,t);if(r(n)){return f(n,i)>-1}else{return n===i}}function Y(e,t,i){var n=i.target,r=n.multiple,s,a,o,l=n.options;if(r){s=[];for(a=0;a<l.length;a++){o=l[a];if(o.selected){s.push(u(o._value)?o.value:o._value)}}}else{for(a=0;a<l.length;a++){o=l[a];if(o.selected){s=u(o._value)?o.value:o._value;break}}}N.setModel(e,t,s)}var K=function(){var e=typeof console!=="undefined";return e?function(e){console.error(e)}:j}();var Z=(Object.freeze||Object)({isNullOrUndefined:u,isArray:r,indexOf:f,Type:E,TypeName:w,SelfClosingTags:X,TextTags:C,Directives:A,Options:N,hasOwn:T,noop:j,each:M,isObject:I,map:O,className:L,isWhiteSpace:D,trimRight:W,trimLeft:$,setDelimiters:B,getDelimiters:R,configure:F,isSelfClosingTag:z,isTextTag:H,isDirective:U,extend:q,setCheckboxModel:P,detectCheckboxChecked:Q,setSelectModel:Y,error:K});function G(e,t){var i=function t(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++){n[r]=arguments[r]}return e.apply(this,n)};i.prototype=te(e.prototype);M(t,function(t,n){if(n==="displayName"){i.displayName=t}if(!ie(t)||n==="template"){i.prototype[n]=t;return}i.prototype[n]=function(){var i=function t(){for(var i=arguments.length,r=Array(i),s=0;s<i;s++){r[s]=arguments[s]}return e.prototype[n].apply(this,r)},r=function t(i){return e.prototype[n].apply(this,i)};return function(){var e=this||{},n=e._super,s=e._superApply,a=void 0;e._super=i;e._superApply=r;for(var u=arguments.length,o=Array(u),l=0;l<u;l++){o[l]=arguments[l]}a=t.apply(this,o);e._super=n;e._superApply=s;return a}}()});i.__super=e.prototype;i.prototype.constructor=i;q(i,e);return i}var ee=Object.create;function te(e){if(ee){return ee(e)}else{var t=function e(){};t.prototype=e;return new t}}function ie(e){return typeof e==="function"}function ne(e,t,i){var n=u(e)?undefined:e[t];if(n===undefined){n=i}return ie(n)?n.call(e):n}var re=Object.prototype.toString;var se=function e(i,n,r,s){if(i===n)return i!==0||1/i===1/n;if(u(i)||u(n))return i===n;var a=re.call(i);if(a!==re.call(n))return false;switch(a){case"[object RegExp]":case"[object String]":return""+i===""+n;case"[object Number]":if(+i!==+i)return+n!==+n;return+i===0?1/+i===1/n:+i===+n;case"[object Date]":case"[object Boolean]":return+i===+n}var o=a==="[object Array]";if(!o){if((typeof i==="undefined"?"undefined":t(i))!="object"||(typeof n==="undefined"?"undefined":t(n))!="object")return false;var l=i.constructor,f=n.constructor;if(l!==f&&!(ie(l)&&l instanceof l&&ie(f)&&f instanceof f)&&"constructor"in i&&"constructor"in n){return false}}r=r||[];s=s||[];var c=r.length;while(c--){if(r[c]===i)return s[c]===n}r.push(i);s.push(n);if(o){c=i.length;if(c!==n.length)return false;while(c--){if(!e(i[c],n[c],r,s))return false}}else{var h=le(i),d;c=h.length;if(le(n).length!==c)return false;while(c--){d=h[c];if(!(T.call(n,d)&&e(i[d],n[d],r,s)))return false}}r.pop();s.pop();return true};function ae(e,t){return se(e,t)}var ue=0;function oe(e){var t=++ue+"";return e?e+t:t}var le=Object.keys||function(e){var t=[];M(e,function(e,i){return t.push(i)});return t};var fe={};var ce=/^\./;var he=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var de=/\\(\\)?/g;var ve=/^(?:0|[1-9]\d*)$/;function pe(e){if(typeof e!=="string")return e;if(fe[e])return fe[e];var t=[];if(ce.test(e)){ne.push("")}e.replace(he,function(i,n,r,s){t.push(r?e.replace(de,"$1"):n||i)});fe[e]=t;return t}function _e(e){return(typeof e==="number"||ve.test(e))&&e>-1&&e%1===0}function me(e,t,i){if(T.call(e,t))return e[t];t=pe(t);var n=0,r=t.length;while(!u(e)&&n<r){e=e[t[n++]]}return n&&n===r?e:i}function ge(e,t,i){if(T.call(e,t)){e[t]=i;return e}t=pe(t);var n=-1,r=t.length,s=r-1,a=e;while(!u(a)&&++n<r){var o=t[n],l=i;if(n!==s){var f=a[o];l=I(f)?f:_e(t[n+1])?[]:{}}a[o]=l;a=a[o]}return e}var ye=E;var be=w;var Se=/^<\w+:?\s*[\w\/>]/;function ke(e){return e===58||e===95||e===45||e===36||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57}function xe(){this.source="";this.index=0;this.length=0}xe.prototype={constructor:xe,parse:function e(t,i){this.source=W(t);this.index=0;this.line=1;this.column=1;this.length=this.source.length;this.options=q({},F(),i);return this._parseTemplate()},_parseTemplate:function e(){var t=[],i={count:0};while(this.index<this.length&&i.count>=0){t.push(this._advance(i))}return t},_advance:function e(t){var i=this._char();if(i!=="<"){return this._scanJS(t)}else{return this._scanJSX()}},_scanJS:function e(t){var i=this.index,n=this.options.delimiters;while(this.index<this.length){var r=this._char();if(r==="'"||r==='"'){this._scanStringLiteral()}else if(this._isElementStart()){break}else{if(r==="{"){t.count++}else if(t.count>0&&r==="}"){t.count--}else if(this._isExpect(n[1])){t.count--;break}else if(r==="\n"){this._updateLine()}this._updateIndex()}}return this._type(ye.JS,{value:this.source.slice(i,this.index)})},_scanStringLiteral:function e(){var t=this._char(),i=this.index,n="";this._updateIndex();while(this.index<this.length){var r=this._char();if(r.charCodeAt(0)===10){this._updateLine()}this._updateIndex();if(r===t){t="";break}else if(r==="\\"){n+=this._char(this._updateIndex())}else{n+=r}}if(t!==""){this._error("Unclosed quote")}return this._type(ye.StringLiteral,{value:this.source.slice(i,this.index)})},_scanJSX:function e(){return this._parseJSXElement()},_scanJSXText:function e(t){var i=this.index,n=t.length,r,s;e:while(this.index<this.length){s=this._charCode();if(D(s)){if(s===10){this._updateLine()}}else{for(r=0;r<n;r++){if(typeof t[r]==="function"&&t[r].call(this)||this._isExpect(t[r])){break e}}}this._updateIndex()}return this._type(ye.JSXText,{value:this.source.slice(i,this.index)})},_scanJSXStringLiteral:function e(){var t=this._char();if(t!=="'"&&t!=='"'){this._error("String literal must starts with a qoute")}this._updateIndex();var i=this._scanJSXText([t]);this._updateIndex();return i},_parseJSXElement:function e(){this._expect("<");var t=this.index,i={},n=this._charCode();if(n>=65&&n<=90){this._type(ye.JSXWidget,i)}else if(this._isExpect("!--")){return this._parseJSXComment()}else if(this._charCode(this.index+1)===58){t+=2;switch(n){case 116:this._type(ye.JSXVdt,i);break;case 98:this._type(ye.JSXBlock,i);break;default:this._error("Unknown directive "+String.fromCharCode(n)+":")}this._updateIndex(2)}else{this._type(ye.JSXElement,i)}while(this.index<this.length){if(!ke(this._charCode())){break}this._updateIndex()}i.value=this.source.slice(t,this.index);return this._parseAttributeAndChildren(i)},_parseAttributeAndChildren:function e(t){var i=this._parseJSXAttribute();q(t,{attributes:i.attributes,directives:i.directives,children:[]});if(!t.directives.length)delete t.directives;if(t.type===ye.JSXElement&&z(t.value)){if(this._char()==="/"){this._updateIndex()}this._expect(">")}else if(this._char()==="/"){this._updateIndex();this._expect(">")}else{this._expect(">");t.children=this._parseJSXChildren(t)}return t},_parseJSXAttribute:function e(){var t={attributes:[],directives:[]};while(this.index<this.length){this._skipWhitespace();if(this._char()==="/"||this._char()===">"){break}else{var i=this._parseJSXAttributeName();if(this._char()==="="){this._updateIndex();i.value=this._parseJSXAttributeValue()}t[i.type===ye.JSXAttribute?"attributes":"directives"].push(i)}}return t},_parseJSXAttributeName:function e(){var t=this.index;if(!ke(this._charCode())){this._error("Unexpected identifier "+this._char())}while(this.index<this.length){var i=this._charCode();if(!ke(i)){break}this._updateIndex()}var n=this.source.slice(t,this.index);if(U(n)){return this._type(ye.JSXDirective,{name:n})}return this._type(ye.JSXAttribute,{name:n})},_parseJSXAttributeValue:function e(){var t,i=this.options.delimiters;if(this._isExpect(i[0])){t=this._parseJSXExpressionContainer()}else{t=this._scanJSXStringLiteral()}return t},_parseJSXExpressionContainer:function e(){var t,i=this.options.delimiters;this._expect(i[0]);if(this._isExpect(i[1])){t=this._parseJSXEmptyExpression()}else{t=this._parseExpression()}this._expect(i[1]);return this._type(ye.JSXExpressionContainer,{value:t})},_parseJSXEmptyExpression:function e(){return this._type(ye.JSXEmptyExpression,{value:null})},_parseExpression:function e(){return this._parseTemplate()},_parseJSXChildren:function e(t){var i=[],n=t.value+">",r=null;switch(t.type){case ye.JSXBlock:n="</b:"+n;break;case ye.JSXVdt:n="</t:"+n;break;case ye.JSXElement:default:n="</"+n;break}this._skipWhitespaceBetweenElements(n);while(this.index<this.length){if(this._isExpect(n)){break}r=this._parseJSXChild(t,n,r);i.push(r)}this._parseJSXClosingElement();return i},_parseJSXChild:function e(t,i,n){var r,s=this.options.delimiters;if(this._isExpect(s[0])){r=this._parseJSXExpressionContainer()}else if(H(t.value)){r=this._scanJSXText([i,s[0]])}else if(this._isElementStart()){r=this._parseJSXElement();this._skipWhitespaceBetweenElements(i)}else{r=this._scanJSXText([function(){return this._isExpect(i)||this._isElementStart()},s[0]])}r.prev=undefined;r.next=undefined;if(n){n.next=r;r.prev=n}return r},_parseJSXClosingElement:function e(){this._expect("</");while(this.index<this.length){if(!ke(this._charCode())){break}this._updateIndex()}this._skipWhitespace();this._expect(">")},_parseJSXComment:function e(){this._expect("!--");var t=this.index;while(this.index<this.length){if(this._isExpect("--\x3e")){break}else if(this._charCode()===10){this._updateLine()}this._updateIndex()}var i=this._type(ye.JSXComment,{value:this.source.slice(t,this.index)});this._expect("--\x3e");return i},_char:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.index;return this.source.charAt(t)},_charCode:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.index;return this.source.charCodeAt(t)},_skipWhitespaceBetweenElements:function e(t){if(!this.options.skipWhitespace)return;var i=this.index;while(i<this.length){var n=this._charCode(i);if(D(n)){i++}else if(this._isExpect(t,i)||this._isElementStart(i)){this._skipWhitespace();break}else{break}}},_skipWhitespace:function e(){while(this.index<this.length){var t=this._charCode();if(!D(t)){break}else if(t===10){this._updateLine()}this._updateIndex()}},_expect:function e(t){if(!this._isExpect(t)){this._error("expect string "+t)}this._updateIndex(t.length)},_isExpect:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.index;return this.source.slice(i,i+t.length)===t},_isElementStart:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.index;return this._char(t)==="<"&&(this._isExpect("\x3c!--")||Se.test(this.source.slice(t)))},_type:function e(t,i){i||(i={});i.type=t;i.typeName=be[t];i.line=this.line;i.column=this.column;return i},_updateLine:function e(){this.line++;this.column=0},_updateIndex:function e(t){t===undefined&&(t=1);var i=this.index;this.index=this.index+t;this.column=this.column+t;return i},_error:function e(t){throw new Error(t+" At: {line: "+this.line+", column: "+this.column+'} Near: "'+this.source.slice(this.index-10,this.index+20)+'"')}};var Ee=E;var we=w;var Je=function(){var e={class:"className",for:"htmlFor"};return function(t){return e[t]||t}}();var Xe=function e(t){var i=t.length-1;for(var n=i;n>=0;n--){if(t[n]!=="null"){break}}return(n===i?t:t.slice(0,n+1)).join(", ")};function Ce(){}Ce.prototype={constructor:Ce,stringify:function e(t,i){if(arguments.length===1){i=true}this.autoReturn=!!i;this.enterStringExpression=false;return this._visitJSXExpressionContainer(t,true)},_visitJSXExpressionContainer:function e(t,i){var n="",r=t.length;M(t,function(e,t){if(this.autoReturn&&i&&t===r-1){n+="return "+this._visit(e,i)}else{n+=this._visit(e,i)}},this);if(!i&&!this.enterStringExpression){n="function() {try {return ["+n+"][0]} catch(e) {_e(e)}}.call(this)"}return n},_visit:function e(t,i){t=t||{};switch(t.type){case Ee.JS:return this._visitJS(t,i);case Ee.JSXElement:return this._visitJSX(t);case Ee.JSXText:return this._visitJSXText(t);case Ee.JSXExpressionContainer:return this._visitJSXExpressionContainer(t.value);case Ee.JSXWidget:return this._visitJSXWidget(t);case Ee.JSXBlock:return this._visitJSXBlock(t);case Ee.JSXVdt:return this._visitJSXVdt(t,i);case Ee.JSXComment:return this._visitJSXComment(t);default:return"null"}},_visitJS:function e(t){return this.enterStringExpression?"("+t.value+")":t.value},_visitJSX:function e(t){if(t.value==="script"||t.value==="style"){if(t.children.length){t.attributes.push({type:Ee.JSXAttribute,typeName:we[Ee.JSXAttribute],name:"innerHTML",value:{type:Ee.JS,typeName:we[Ee.JS],value:this._visitJSXChildrenAsString(t.children)}});t.children=[]}}return this._visitJSXDirective(t,this._visitJSXElement(t))},_visitJSXElement:function e(t){var i=this._visitJSXAttribute(t,true,true);return"h("+Xe(["'"+t.value+"'",i.props,this._visitJSXChildren(t.children),i.className,i.key,i.ref])+")"},_visitJSXChildren:function e(t){var i=[];M(t,function(e){if(e._skip)return;i.push(this._visit(e))},this);return i.length>1?"["+i.join(", ")+"]":i[0]||"null"},_visitJSXDirective:function e(t,i){var n={data:null,value:"value",key:"key"};M(t.directives,function(e){switch(e.name){case"v-if":i=this._visitJSXDirectiveIf(e,i,t);break;case"v-else-if":case"v-else":if(t._skip)break;throw new Error(e.name+" must be led with v-if. At: {line: "+t.line+", column: "+t.column+"}");case"v-for":n.data=this._visitJSXAttributeValue(e.value);break;case"v-for-value":n.value=this._visitJSXText(e.value,true);break;case"v-for-key":n.key=this._visitJSXText(e.value,true);break;default:break}},this);if(n.data){i=this._visitJSXDirectiveFor(n,i)}return i},_visitJSXDirectiveIf:function e(t,i,n){var r=this._visitJSXAttributeValue(t.value)+" ? "+i+" : ",s=false,a=n,u=[],o=function e(){M(u,function(e){e._skip=true});u=[]};while(a=a.next){if(a.type===E.JSXText){if(!/^\s*$/.test(a.value))break;else u.push(a)}else if(a.type===E.JSXElement||a.type===E.JSXWidget){if(!a.directives||!a.directives.length)break;var l=false;for(var f=0,c=a.directives.length;f<c;f++){var h=a.directives[f],d=h.name;if(d==="v-else-if"){a._skip=true;r+=this._visitJSXAttributeValue(h.value)+" ? "+this._visit(a)+" : ";l=true;o();break}else if(d==="v-else"){a._skip=true;r+=this._visit(a);s=true;o();break}}if(!l)break}}if(!s)r+="undefined";return r},_visitJSXDirectiveFor:function e(t,i){return"_Vdt.utils.map("+t.data+", function("+t.value+", "+t.key+") {\n"+"return "+i+";\n"+"}, this)"},_visitJSXChildrenAsString:function e(t){var i=[];this.enterStringExpression=true;M(t,function(e){i.push(this._visit(e))},this);this.enterStringExpression=false;return i.join("+")},_visitJSXAttribute:function e(t,i,n){var r=[],s=t.attributes,a,u,o,l="text",f=false,c={trueValue:true,falseValue:false};M(s,function(e){var t=Je(e.name),s=this._visitJSXAttributeValue(e.value);if(t==="widget"&&e.value.type===Ee.JSXText){o="function(i) {widgets["+s+"] = i}";return}else if(t==="className"){if(e.value.type===Ee.JSXExpressionContainer){s="_className("+s+")"}if(i){a=s;return}}else if(t==="key"&&n){u=s;return}else if(t==="ref"&&n){o=s;return}else if(t==="v-model"){f=s;return}else if(t==="v-model-true"){c.trueValue=s;return}else if(t==="v-model-false"){c.falseValue=s;return}else if(t==="type"){l=s}else if(t==="value"){c.value=s}r.push("'"+t+"': "+s)},this);if(f){this._visitJSXAttributeModel(t,f,r,l,c)}return{props:r.length?"{"+r.join(", ")+"}":"null",className:a||"null",ref:o||"null",key:u||"null"}},_visitJSXAttributeModel:function e(t,i,n,r,s){var a="value",o="change";if(t.type===Ee.JSXElement){switch(t.value){case"input":a="value";switch(r){case"'file'":o="change";break;case"'radio'":case"'checkbox'":var l=s.trueValue,f=s.falseValue,c=s.value;if(u(c)){n.push("checked: _getModel(self, "+i+") === "+l);n.push("'ev-change': function(__e) {\n                                    _setModel(self, "+i+", __e.target.checked ? "+l+" : "+f+");\n                                }")}else{if(r==="'radio'"){n.push("checked: _getModel(self, "+i+") === "+c);n.push("'ev-change': function(__e) { \n                                        _setModel(self, "+i+", __e.target.checked ? "+c+" : "+f+");\n                                    }")}else{n.push("checked: _detectCheckboxChecked(self, "+i+", "+c+")");n.push("'ev-change': function(__e) { \n                                        _setCheckboxModel(self, "+i+", "+c+", "+f+", __e);\n                                    }")}}return;default:o="input";break}break;case"select":n.push("value: _getModel(self, "+i+")");n.push("'ev-change': function(__e) {\n                        _setSelectModel(self, "+i+", __e);\n                    }");return;default:break}n.push(a+": _getModel(self, "+i+")");n.push("'ev-"+o+"': function(__e) { _setModel(self, "+i+", __e.target.value) }")}else if(t.type===Ee.JSXWidget){n.push("value: _getModel(self, "+i+")");n.push("'ev-$change:value': function(__c, __n) { _setModel(self, "+i+", __n) }")}},_visitJSXAttributeValue:function e(t){return r(t)?this._visitJSXChildren(t):this._visit(t)},_visitJSXText:function e(t,i){var n=t.value.replace(/([\'\"\\])/g,"\\$1").replace(/[\r\n]/g,"\\n");if(!i){n="'"+n+"'"}return n},_visitJSXWidget:function e(t){if(t.children.length){t.attributes.push({name:"children",value:t.children})}var i=this._visitJSXAttribute(t,false,false);return this._visitJSXDirective(t,"h("+Xe([t.value,i.props,"null","null",i.key,i.ref])+")")},_visitJSXBlock:function e(t,i){arguments.length===1&&(i=true);return"(_blocks."+t.value+" = function(parent) {return "+this._visitJSXChildren(t.children)+";}) && (__blocks."+t.value+" = function(parent) {\n"+"var self = this;\n"+"return blocks."+t.value+" ? blocks."+t.value+".call(this, function() {\n"+"return _blocks."+t.value+".call(self, parent);\n"+"}) : _blocks."+t.value+".call(this, parent);\n"+"})"+(i?" && __blocks."+t.value+".call(this)":"")},_visitJSXVdt:function e(t,i){var n=["(function(blocks) {","var _blocks = {}, __blocks = extend({}, blocks), _obj = "+this._visitJSXAttribute(t,false,false).props+" || {};",'if (_obj.hasOwnProperty("arguments")) { extend(_obj, _obj.arguments === null ? obj : _obj.arguments); delete _obj.arguments; }',"return "+t.value+".call(this, _obj, _Vdt, "].join("\n"),r=[];M(t.children,function(e){if(e.type===Ee.JSXBlock){r.push(this._visitJSXBlock(e,false))}},this);n+=(r.length?r.join(" && ")+" && __blocks)":"__blocks)")+"}).call(this, "+(i?"blocks)":"{})");return n},_visitJSXComment:function e(t){return"hc("+this._visitJSXText(t)+")"}};var Ae={Text:1,HtmlElement:1<<1,ComponentClass:1<<2,ComponentFunction:1<<3,ComponentInstance:1<<4,HtmlComment:1<<5,InputElement:1<<6,SelectElement:1<<7,TextareaElement:1<<8};Ae.FormElement=Ae.InputElement|Ae.SelectElement|Ae.TextareaElement;Ae.Element=Ae.HtmlElement|Ae.FormElement;Ae.ComponentClassOrInstance=Ae.ComponentClass|Ae.ComponentInstance;Ae.TextElement=Ae.Text|Ae.HtmlComment;var Ne={};if("production"!=="production"&&!g.isIE){Object.freeze(Ne)}function Te(e,t,i,n,r,s,a){this.type=e;this.tag=t;this.props=i;this.children=n;this.key=s;this.ref=a;this.className=r}function je(e,i,n,r,s,a){var u=void 0;i||(i=Ne);switch(typeof e==="undefined"?"undefined":t(e)){case"string":if(e==="input"){u=Ae.InputElement}else if(e==="select"){u=Ae.SelectElement}else if(e==="textarea"){u=Ae.TextareaElement}else{u=Ae.HtmlElement}break;case"function":if(e.prototype.init){u=Ae.ComponentClass}else{return e(i)}break;case"object":if(e.init){return Ie(e)}default:throw new Error("unknown vNode type: "+e)}if(i.children){i.children=Oe(i.children)}return new Te(u,e,i,Oe(n),r||i.className,s||i.key,a||i.ref)}function Ve(e){return new Te(Ae.HtmlComment,null,Ne,e)}function Me(e){return new Te(Ae.Text,null,Ne,e)}function Ie(e){var t=e.props||Ne;return new Te(Ae.ComponentInstance,e.constructor,t,e,null,t.key,t.ref)}function Oe(e){if(r(e)){var t=De(e,{index:0});return t.length?t:null}else if(o(e)){return Ie(e)}return e}function Le(e,t){if(u(e.key)){e.key=".$"+t.index++}return e}function De(e,t){var i=void 0;for(var n=0;n<e.length;n++){var s=e[n];if(u(s)){if(!i){i=e.slice(0,n)}}else if(r(s)){if(!i){i=e.slice(0,n)}i=i.concat(De(s,t))}else if(a(s)){if(!i){i=e.slice(0,n)}i.push(Le(Me(s),t))}else if(o(s)){if(!i){i=e.slice(0,n)}i.push(Le(Ie(s),t))}else if(s.type){if(!i){i=e.slice(0,n)}i.push(Le(s,t))}}return i||e}var We=["altKey","bubbles","cancelable","ctrlKey","eventPhase","metaKey","relatedTarget","shiftKey","target","timeStamp","type","view","which"];var $e=["char","charCode","key","keyCode"];var Be=["button","buttons","clientX","clientY","layerX","layerY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement"];var Re=/^key|input/;var Fe=/^(?:mouse|pointer|contextmenu)|click/;function ze(e){for(var t=0;t<We.length;t++){var i=We[t];this[i]=e[i]}if(!e.target){this.target=e.srcElement}this._rawEvent=e}ze.prototype.preventDefault=function(){var e=this._rawEvent;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}};ze.prototype.stopPropagation=function(){var e=this._rawEvent;e.cancelBubble=true;e.stopImmediatePropagation&&e.stopImmediatePropagation()};function He(e){ze.call(this,e);for(var t=0;t<Be.length;t++){var i=Be[t];this[i]=e[i]}}He.prototype=h(ze.prototype);He.prototype.constructor=He;function Ue(e){ze.call(this,e);for(var t=0;t<$e.length;t++){var i=$e[t];this[i]=e[i]}}Ue.prototype=h(ze.prototype);Ue.prototype.constructor=Ue;function qe(e){if(Re.test(e.type)){return new Ue(e)}else if(Fe.test(e.type)){return new He(e)}else{return new ze(e)}}var Pe=void 0;var Qe=void 0;if("addEventListener"in n){Pe=function e(t,i){n.addEventListener(t,i,false)};Qe=function e(t,i){n.removeEventListener(t,i)}}else{Pe=function e(t,i){n.attachEvent("on"+t,i)};Qe=function e(t,i){n.detachEvent("on"+t,i)}}var Ye={};function Ke(e,t,i,n){if(e==="blur"){e="focusout"}else if(e==="focus"){e="focusin"}var r=Ye[e];if(i){if(!r){r={items:new d,docEvent:null};r.docEvent=Ge(e,r);Ye[e]=r}r.items.set(n,i)}else if(r){var s=r.items;if(s.delete(n)){if(s.size===0){Qe(e,r.docEvent);delete r[e]}}}}function Ze(e,t,i,n,r){var s=i.get(t);if(s){n--;e.currentTarget=t;s(e);if(e._rawEvent.cancelBubble){return}}if(n>0){var a=t.parentNode;if(u(a)||r&&a.nodeType===1&&a.disabled){return}Ze(e,a,i,n,r)}}function Ge(e,t){var i=function e(i){var n=t.items.size;i||(i=window.event);if(n>0){i=qe(i);Ze(i,i.target,t.items,n,i.type==="click")}};Pe(e,i);return i}function et(e,t,i,n){var s=i.multiple;if(s!==t.multiple){t.multiple=s}var a=e.children;if(!u(a)){var o=i.value;if(n&&u(o)){o=i.defaultValue}var l={hasSelected:false};if(r(a)){for(var f=0;f<a.length;f++){tt(a[f],o,l)}}else{tt(a,o,l)}if(!l.hasSelected){t.value=""}}}function tt(e,t,i){var n=e.tag;if(n==="optgroup"){var s=e.children;if(r(s)){for(var a=0;a<s.length;a++){it(s[a],t,i)}}else{it(s,t,i)}}else{it(e,t,i)}}function it(e,t,i){if(e.type&Ae.HtmlElement){var n=e.props;var s=e.dom;if(r(t)&&f(t,n.value)!==-1||n.value===t){s.selected=true;if(!i.hasSelected)i.hasSelected=true}else if(!u(t)||!u(n.selected)){var a=!!n.selected;if(!i.hasSelected&&a)i.hasSelected=true;s.selected=a}}}function nt(e,t,i){var n=i.type;var r=i.value;var s=i.checked;var a=i.defaultValue;var o=i.multiple;var l=!u(r);if(o&&o!==t.multiple){t.multiple=o}if(!u(a)&&!l){t.defaultValue=a+""}if(rt(n)){if(l){t.value=r}if(!u(s)){t.checked=s}}else{if(l&&t.value!==r){t.value=r}else if(!u(s)){t.checked=s}}}function rt(e){return e==="checkbox"||e==="radio"}function st(e,t,i,n){var r=i.value;var s=t.value;if(u(r)){if(n){var a=i.defaultValue;if(!u(a)){if(a!==s){t.value=a}}else if(s!==""){t.value=""}}}else{if(s!==r){t.value=r}}}function at(e,t,i,n){var r=e.type;if(r&Ae.InputElement){nt(e,t,i,n)}else if(r&Ae.TextareaElement){st(e,t,i,n)}else if(r&Ae.SelectElement){et(e,t,i,n)}}function ut(e,t,i,n){if(u(e))return;var r=true;if(i){r=false}else{i=new m}var s=ot(e,t,i,true,n);if(r){i.trigger()}return s}function ot(e,t,i,n,r){var s=e.type;if(s&Ae.Element){return lt(e,t,i,n,r)}else if(s&Ae.Text){return ft(e,t)}else if(s&Ae.ComponentClassOrInstance){return ct(e,t,i,null,n,r)}else if(s&Ae.HtmlComment){return ht(e,t)}else{throw new Error("unknown vnode type "+s)}}function lt(e,t,i,r,s){var a=n.createElement(e.tag);var o=e.children;var l=e.ref;var f=e.props;var c=e.className;e.dom=a;if(!u(o)){dt(o,a,i,r,e)}if(!u(c)){a.className=c}if(f!==Ne){var h=(e.type&Ae.FormElement)>0;for(var d in f){Ot(d,null,f[d],a,h)}if(h){at(e,a,f,true)}}if(!u(l)){xt(a,l,i)}if(t&&!a.parentNode){t.appendChild(a)}return a}function ft(e,t){var i=n.createTextNode(e.children);e.dom=i;if(t){t.appendChild(i)}return i}function ct(e,t,i,n,r,s){var a=e.props;var u=e.type&Ae.ComponentClass?new e.tag(a):e.children;u.parentDom=t;u.mountedQueue=i;u.isRender=r;u.parentVNode=s;var o=u.init(n,e);var l=e.ref;e.dom=o;e.children=u;if(t){kt(t,e)}if(typeof u.mount==="function"){i.push(function(){return u.mount(n,e)})}if(typeof l==="function"){l(u)}return o}function ht(e,t){var i=n.createComment(e.children);e.dom=i;if(t){t.appendChild(i)}return i}function dt(e,t,i,n,s){if(a(e)){k(t,e)}else if(r(e)){for(var u=0;u<e.length;u++){ot(e[u],t,i,n,s)}}else{ot(e,t,i,n,s)}}function vt(e,t){if(u(e)){return}else if(r(e)){for(var i=0;i<e.length;i++){pt(e[i],t)}}else{pt(e,t)}}function pt(e,t){var i=e.type;if(i&Ae.Element){return _t(e,t)}else if(i&Ae.TextElement){return mt(e,t)}else if(i&Ae.ComponentClassOrInstance){return yt(e,t)}else if(i&Ae.ComponentFunction){return gt(e,t)}}function _t(e,t){var i=e.ref;var n=e.props;var r=e.dom;if(i){i(null)}vt(e.children,null);for(var s in n){var a=n[s];if(!u(a)&&l(s)){Ke(s.substr(0,3),a,null,r)}}if(t){t.removeChild(r)}}function mt(e,t){if(t){t.removeChild(e.dom)}}function gt(e,t){var i=e.ref;if(i){i(null)}pt(e.children,t)}function yt(e,t,i){var n=e.children;var r=e.ref;if(typeof n.destroy==="function"){n.destroy(e,i)}if(r){r(null)}if(t){St(t,e)}}function bt(e,t,i){var n=t.dom;var r=i.dom;if(!e)e=n.parentNode;if(n._unmount){n._unmount(t,e);if(!r.parentNode){e.appendChild(r)}}else{e.replaceChild(r,n)}}function St(e,t){var i=t.dom;if(i._unmount){i._unmount(t,e)}else{e.removeChild(i)}}function kt(e,t){var i=t.dom;if(!i.parentNode){e.appendChild(i)}}function xt(e,t,i){if(typeof t==="function"){i.push(function(){return t(e)})}else{throw new Error('ref must be a function, but got "'+JSON.stringify(t)+'"')}}function Et(e,t,i,n){var r=new m;var s=wt(e,t,i,r,n);r.trigger();return s}function wt(e,t,i,n,r){if(e!==t){var s=t.type;var a=e.type;if(s&Ae.Element){if(a&Ae.Element){Jt(e,t,i,n,r)}else{Vt(e,t,i,n,r)}}else if(s&Ae.TextElement){if(a&Ae.TextElement){Mt(e,t)}else{Vt(e,t,i,n)}}else if(s&Ae.ComponentClass){if(a&Ae.ComponentClass){Xt(e,t,i,n,r)}else{Vt(e,t,i,n,r)}}else if(s&Ae.ComponentInstance){if(a&Ae.ComponentInstance){Ct(e,t,i,n,r)}else{Vt(e,t,i,n,r)}}}return t.dom}function Jt(e,t,i,n,r){var s=e.dom;var a=e.props;var o=t.props;var l=e.children;var f=t.children;var c=t.ref;var h=e.className;var d=t.className;t.dom=s;if(e.tag!==t.tag){Vt(e,t,i,n,r)}else{if(l!==f){At(l,f,s,n,t)}if(a!==o){It(e,t)}if(h!==d){if(u(d)){s.removeAttribute("class")}else{s.className=d}}if(!u(c)&&e.ref!==c){xt(s,c,n)}}}function Xt(e,t,i,n,r){var s=e.tag;var a=t.tag;var u=e.dom;var o=void 0;var l=void 0;if(s!==a||e.key!==t.key){l=ct(t,i,n,e,false,r)}else{o=e.children
;l=o.update(e,t);t.dom=l;t.children=o}if(u!==l&&u.parentNode){bt(i,e,t)}}function Ct(e,t,i,n,r){var s=e.children;var a=t.children;var u=e.dom;var o=void 0;if(s!==a){o=ct(t,i,n,e,false,r)}else{o=s.update(e,t);t.dom=o}if(u!==o&&u.parentNode){bt(i,e,t)}}function At(e,t,i,n,s){if(u(e)){if(!u(t)){dt(t,i,n,false,s)}}else if(u(t)){vt(e,i)}else if(a(t)){if(a(e)){i.firstChild.nodeValue=t}else{vt(e,i);k(i,t)}}else if(r(e)){if(r(t)){Nt(e,t,i,n,s)}else{vt(e,i);ot(t,i,n,false,s)}}else if(r(t)){pt(e,i);dt(t,i,n,false,s)}else if(a(e)){k(i,"");ot(t,i,n,false,s)}else{wt(e,t,i,n,s)}}function Nt(e,t,i,n,r){var s=e.length;var a=t.length;var u=s-1;var o=a-1;var l=0;var f=0;var c=void 0;var h=void 0;var d=void 0;var v=void 0;var p=void 0;var _=void 0;var m=void 0;var g=e[l];var y=t[f];var b=e[u];var S=t[o];e:while(true){while(g.key===y.key){wt(g,y,i,n,r);++l;++f;if(l>u||f>o){break e}g=e[l];y=t[f]}while(b.key===S.key){wt(b,S,i,n,r);--u;--o;if(u<l||o<f){break e}b=e[u];S=t[o]}if(b.key===y.key){wt(b,y,i,n,r);i.insertBefore(y.dom,g.dom);--u;++f;b=e[u];y=t[f];continue}if(g.key===S.key){wt(g,S,i,n,r);jt(o,a,S.dom,t,i);++l;--o;g=e[l];S=t[o];continue}break}if(l>u){while(f<=o){jt(o,a,ot(t[f],null,n,false,r),t,i);++f}}else if(f>o){while(l<=u){pt(e[l],i);++l}}else{s=u-l+1;a=o-f+1;var k=new Array(a);for(c=0;c<a;c++){k[c]=-1}var x=false;var E=0;var w=0;if(a<=4||s*a<=16){for(c=l;c<=u;c++){d=e[c];if(w<a){for(h=f;h<=o;h++){v=t[h];if(d.key===v.key){k[h-f]=c;if(E>h){x=true}else{E=h}wt(d,v,i,n,r);++w;e[c]=null;break}}}}}else{var J={};for(c=f;c<=o;c++){J[t[c].key]=c}for(c=l;c<=u;c++){d=e[c];if(w<a){h=J[d.key];if(h!==undefined){v=t[h];k[h-f]=c;if(E>h){x=true}else{E=h}wt(d,v,i,n,r);++w;e[c]=null}}}}if(s===e.length&&w===0){vt(e,i);while(f<a){ot(t[f],i,n,false,r);++f}}else{if(x){var X=Tt(k);h=X.length-1;for(c=a-1;c>=0;c--){if(k[c]===-1){E=c+f;jt(E,t.length,ot(t[E],null,n,false,r),t,i)}else{if(h<0||c!==X[h]){E=c+f;jt(E,t.length,t[E].dom,t,i)}else{--h}}}}else if(w!==a){for(c=a-1;c>=0;c--){if(k[c]===-1){E=c+f;jt(E,t.length,ot(t[E],null,n,false,r),t,i)}}}c=s-w;while(c>0){d=e[l++];if(d!==null){pt(d,i);--c}}}}}function Tt(e){var t=e.slice(0);var i=[0];var n=void 0;var r=void 0;var s=void 0;var a=void 0;var u=void 0;var o=e.length;for(n=0;n<o;n++){var l=e[n];if(l===-1){continue}r=i[i.length-1];if(e[r]<l){t[n]=r;i.push(n);continue}s=0;a=i.length-1;while(s<a){u=(s+a)/2|0;if(e[i[u]]<l){s=u+1}else{a=u}}if(l<e[i[s]]){if(s>0){t[n]=i[s-1]}i[s]=n}}s=i.length;a=i[s-1];while(s-- >0){i[s]=a;a=t[a]}return i}function jt(e,t,i,n,r){var s=e+1;if(s<t){r.insertBefore(i,n[s].dom)}else{kt(r,i)}}function Vt(e,t,i,n,r){pt(e,null);ot(t,null,n,false,r);bt(i,e,t)}function Mt(e,t,i){var n=t.children;var r=e.dom;t.dom=r;if(e.children!==n){r.nodeValue=n}}function It(e,t){var i=e.props;var n=t.props;var r=t.dom;var s=void 0;if(n!==Ne){var a=(t.type&Ae.FormElement)>0;for(s in n){Ot(s,i[s],n[s],r,a)}if(a){at(t,r,n,false)}}if(i!==Ne){for(s in i){if(!(s in n)){Lt(s,i[s],r)}}}}function Ot(e,t,i,n,r){if(t!==i){if(v[e]||r&&e==="value"){return}else if(p[e]){n[e]=!!i}else if(_[e]){var a=u(i)?"":i;if(n[e]!==a){n[e]=a}if(e==="value"){n._value=a}}else if(u(i)){Lt(e,t,n)}else if(l(e)){Ke(e.substr(3),t,i,n)}else if(s(i)){Wt(e,t,i,n)}else if(e==="innerHTML"){n.innerHTML=i}else{n.setAttribute(e,i)}}}function Lt(e,t,i){if(!u(t)){switch(e){case"value":i.value="";return;case"style":i.removeAttribute("style");return;case"attributes":for(var n in t){i.removeAttribute(n)}return;case"dataset":Dt(t,i);return;default:break}if(p[e]){i[e]=false}else if(l(e)){Ke(e.substr(3),t,null,i)}else if(s(t)){var r=i[e];try{i[e]=undefined;delete i[e]}catch(e){for(var a in t){delete r[a]}}}else{i.removeAttribute(e)}}}var Dt=g.isIE?function(e,t){for(var i in e){t.removeAttribute("data-"+Rt(i))}}:function(e,t){var i=t.dataset;for(var n in e){delete i[n]}};function Wt(e,t,i,n){if(t&&!s(t)&&!u(t)){Lt(e,t,n);t=null}switch(e){case"attributes":return zt(t,i,n);case"style":return Ht(t,i,n);case"dataset":return $t(e,t,i,n);default:return Ft(e,t,i,n)}}var $t=g.isIE?function e(t,i,n,r){var s={};var a=void 0;var o=void 0;for(a in n){var l="data-"+Rt(a);o=n[a];if(u(o)){r.removeAttribute(l);s[a]=true}else{r.setAttribute(l,o)}}if(!u(i)){for(a in i){if(u(n[a])&&!s[a]){r.removeAttribute("data-"+Rt(a))}}}}:Ft;var Bt={};function Rt(e){if(!Bt[e]){Bt[e]=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}return Bt[e]}function Ft(e,t,i,n){var r=n[e];if(u(r)){r=n[e]={}}var s=void 0;var a=void 0;for(s in i){r[s]=i[s]}if(!u(t)){for(s in t){if(u(i[s])){delete r[s]}}}}function zt(e,t,i){var n={};var r=void 0;var s=void 0;for(r in t){s=t[r];if(u(s)){i.removeAttribute(r);n[r]=true}else{i.setAttribute(r,s)}}if(!u(e)){for(r in e){if(u(t[r])&&!n[r]){i.removeAttribute(r)}}}}function Ht(e,t,i){var n=i.style;var r={};var s=void 0;var a=void 0;for(s in t){a=t[s];if(u(a)){n[s]="";r[s]=true}else{n[s]=a}}if(!u(e)){for(s in e){if(u(t[s])&&!r[s]){n[s]=""}}}}var Ut=(Object.freeze||Object)({h:je,patch:Et,render:ut,hc:Ve,remove:pt,MountedQueue:m});var qt=new xe;var Pt=new Ce;function Qt(e,t){if(!(this instanceof Qt))return new Qt(e,t);this.template=Yt(e,t);this.data=null;this.vNode=null;this.node=null;this.widgets={}}Qt.prototype={constructor:Qt,render:function e(t,i,n,r){this.renderVNode(t);this.node=ut(this.vNode,i,n,r);return this.node},renderVNode:function e(t){if(t!==undefined){this.data=t}this.vNode=this.template(this.data,Qt);return this.vNode},renderString:function e(t){var i=this.render(t);return i.outerHTML||i.toString()},update:function e(t,i,n){var r=this.vNode;this.renderVNode(t);this.node=Et(r,this.vNode,i,n);return this.node},destroy:function e(){pt(this.vNode)}};function Yt(e,i){var n;if(i===true||i===false){i={autoReturn:i}}i=q({},F(),i);switch(typeof e==="undefined"?"undefined":t(e)){case"string":var r=qt.parse(e,i),s=Pt.stringify(r,i.autoReturn);s=["_Vdt || (_Vdt = Vdt);","obj || (obj = {});","blocks || (blocks = {});","var h = _Vdt.miss.h, hc = _Vdt.miss.hc, widgets = this && this.widgets || {}, _blocks = {}, __blocks = {},","__u = _Vdt.utils, extend = __u.extend, _e = __u.error, _className = __u.className,","__o = __u.Options, _getModel = __o.getModel, _setModel = __o.setModel,","_setCheckboxModel = __u.setCheckboxModel, _detectCheckboxChecked = __u.detectCheckboxChecked,","_setSelectModel = __u.setSelectModel,",(i.server?'require = function(file) { return _Vdt.require(file, "'+i.filename.replace(/\\/g,"\\\\")+'") }, ':"")+"self = this.data, scope = obj;",i.noWith?s:["with (obj) {",s,"}"].join("\n")].join("\n");n=i.onlySource?function(){}:new Function("obj","_Vdt","blocks",s);n.source="function(obj, _Vdt, blocks) {\n"+s+"\n}";break;case"function":n=e;break;default:throw new Error("Expect a string or function")}return n}Qt.parser=qt;Qt.stringifier=Pt;Qt.miss=Ut;Qt.compile=Yt;Qt.utils=Z;Qt.setDelimiters=B;Qt.getDelimiters=R;Qt.configure=F;Qt.virtualDom=Ut;function Kt(e){var t=this;if(!this.template){throw new Error("Can not instantiate when this.template does not exist.")}e=q({},ne(this,"defaults"),e);this._events={};this.props={};this.vdt=Qt(this.template);this.set(e,{silent:true});this.widgets=this.vdt.widgets||{};this._widget=this.props.widget||oe("widget");this.attributes=this.props;this.uniqueId=this._widget;this.inited=false;this.rendered=false;this.mounted=false;this.destroyed=false;this._startRender=false;this.displayName=this.displayName;this.addEvents();this._updateCount=0;var i=function e(){t.inited=true;t.trigger("$inited",t)};var n=this._init();if(n&&n.then){n.then(i)}else{i()}}Kt.prototype={constructor:Kt,addEvents:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props;M(i,function(e,i){if(l(i)&&ie(e)){t.on(i.substr(3),e)}})},_init:function e(t){},_create:function e(t,i){},_mount:function e(t,i){},_beforeUpdate:function e(t,i){},_update:function e(t,i){},_destroy:function e(t,i){},_unmount:function e(t,i,n){return true},init:function e(t,i){var n=this;var r=this.vdt;this._lastVNode=t;if(!this.inited){var s=void 0;if(t){s=t.dom;var a=t.children;r.vNode=a.vdt.vNode;if(!a.inited){yt(t,null,i)}}else{var u=Ve("");s=ut(u);r.vNode=u}this.one("$inited",function(){var e=n.init(t,i);var r=i.dom;if(!t||t.key!==i.key){i.dom=e;r.parentNode.replaceChild(e,r);n._triggerMountedQueue()}n.mount(t,i)});r.node=s;return s}this._startRender=true;if(t&&t.key===i.key){if(!t.children.destroyed){yt(t,null,i)}r.vNode=t.children.vdt.vNode;this.element=r.update(this,this.parentDom,i)}else{if(t){yt(t,null,i)}this.element=r.render(this,this.parentDom,this.mountedQueue,i)}this.rendered=true;if(this._pendingUpdate){this._pendingUpdate();this._pendingUpdate=null}this.trigger("$rendered",this);this._create(t,i);return this.element},mount:function e(t,i){if(!this.inited)return;this.mounted=true;this.trigger("$mounted",this);this._mount(t,i)},update:function e(t,i){if(this.destroyed){return t?t.dom:undefined}if(!this.rendered){this._pendingUpdate=function(){this.update(t,i)};return t?t.dom:undefined}++this._updateCount;if(this._updateCount>1)return this.element;if(this._updateCount===1)return this.__update(t,i)},__update:function e(t,i){if(i){this._patchProps(t.props,i.props)}this._beforeUpdate(t,i);this.element=this.vdt.update(this);this._update(t,i);if(--this._updateCount>0){this._updateCount=1;return this.__update()}return this.element},_patchProps:function e(t,i){t=t||Ne;i=i||Ne;var n=void 0;var r=void 0;if(t!==i){var s=void 0;var a=void 0;if(i!==Ne){for(var u in i){r=i[u];if(l(u)){this.set(u,r,{silent:true});n=t[u];if(ie(r)){var o=u.substr(3);if(ie(n)){this.off(o,n)}this.on(o,r)}else if(ie(n)){this.off(u.substr(3),n)}}else{if(!a){a={}}a[u]=r}}if(t!==Ne){for(var f in t){if(!T.call(i,f)){n=t[f];if(l(f)&&ie(n)){this.set(f,undefined,{silent:true});this.off(f.substr(3),n)}else{if(!s){s={}}s[f]=n}}}}if(a){this.set(a,{update:false})}}else{for(var c in t){n=t[c];if(l(c)&&ie(n)){this.set(c,undefined,{silent:true});this.off(c.substr(3),n)}else{if(!s){s={}}s[c]=n}}}if(s){for(var h in s){this.set(h,undefined,{update:false})}}}},destroy:function e(t,i){if(this.destroyed){return console.warn("destroyed multiple times")}var n=this.vdt;if(!this.rendered){var r=this._lastVNode;if(r&&!r.children.destroyed){yt(r,null,t)}}else if(!i||i.key!==t.key){n.destroy()}this._destroy(t,i);this.off();this.destroyed=true},unmount:function e(t,i,n){return this._unmount(t,i,n)},get:function e(t,i){if(t===undefined)return this.props;return me(this.props,t,i)},set:function e(i,n,r){var s=this;if(u(i))return this;var a=false;if((typeof i==="undefined"?"undefined":t(i))==="object"){r=n;a=true}r=q({silent:false,update:true,async:false},r);if(T.call(r,"global")){r.update=r.global}var o=this.props;var l={};var f=false;if(a){if(!r.silent){for(var c in i){var h=i[c];var d=o[c];if(!ae(d,h)){l[c]=[d,h];f=true}o[c]=h}}else{q(o,i)}}else{if(!r.silent){var v=me(o,i);if(!ae(v,n)){if(!T.call(o,i)){l[i]=[v,n];var p=pe(i);var _=[];for(var m=p.length-1;m>0;m--){var g=p.slice(0,m).join(".");var y=me(o,g);l[g]=[y];_.push(g)}ge(o,i,n);for(var b=0;b<_.length;b++){var S=_[b];l[S].push(me(o,S))}}else{l[i]=[v,n];ge(o,i,n)}f=true}else{ge(o,i,n)}}else{ge(o,i,n)}}if(f){for(var k in l){var x=l[k];this.trigger("$change:"+k,this,x[1],x[0])}var E=le(l);this.trigger("$change",this,E);if(r.update&&this._startRender){clearTimeout(this._asyncUpdate);var w=function e(){s.update();for(var t in l){var i=l[t];s.trigger("$changed:"+t,s,i[1],i[0])}s.trigger("$changed",s,E)};if(r.async){this._asyncUpdate=setTimeout(w)}else{w()}}}return this},on:function e(t,i){(this._events[t]||(this._events[t]=[])).push(i);return this},one:function e(t,i){var n=this;var r=function e(){for(var r=arguments.length,s=Array(r),a=0;a<r;a++){s[a]=arguments[a]}i.apply(n,s);n.off(t,e)};this.on(t,r);return this},off:function e(t,i){if(t===undefined){this._events={};return this}var n=this._events[t];if(!n)return this;if(i===undefined){delete this._events[t];return this}for(var r,s=0;s<n.length;s++){r=n[s];if(r===i){n.splice(s,1);s--}}return this},trigger:function e(t){var i=this._events[t];if(i){i=i.slice();for(var n=arguments.length,r=Array(n>1?n-1:0),s=1;s<n;s++){r[s-1]=arguments[s]}for(var a=0,u=i.length;a<u;a++){i[a].apply(this,r)}}return this},_initMountedQueue:function e(){this.mountedQueue=new Qt.miss.MountedQueue},_triggerMountedQueue:function e(){this.mountedQueue.trigger()}};Kt.extend=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.defaults=q({},this.prototype.defaults,e.defaults);return G(this,e)};Kt.mount=function(e,t){if(!e||!(e.prototype instanceof Kt||e===Kt)){throw new Error("expect for a class component")}var i=new e;i.parentDom=t;var n=void 0;if(i.inited){n=i.init();i.mount()}else{i.one("$inited",function(){n=i.init();i.mount()})}return i};var Zt=Kt.extend({defaults:{"a:tag":"div","a:transition":"animate","a:appear":false},template:function e(){var t=Qt.miss.h;var i=this.data;var n=i.get("a:tag");var r={};var s=i.get();for(var a in i.get()){if(a[0]!=="a"||a[1]!==":"){r[a]=s[a]}}return t(n,r,i.get("children"))},init:function e(t,i){var n=this.parentDom;if(n&&n._reserve){t=n._reserve[i.key]}return this._super(t,i)},_mount:function e(t,i){var n=this;var r=false;if(this.isRender){var s=void 0;if(this.get("a:appear")&&(this.parentDom||(s=this.parentVNode)&&s.type&Ae.ComponentClassOrInstance&&!s.children.isRender)){r=true}}var a=this.get("a:transition");var u=this.element;var o=void 0;var l=void 0;if(r){o=a+"-appear";l=a+"-appear-active"}else{o=a+"-enter";l=a+"-enter-active"}this._enterEnd=function(e){e&&e.stopPropagation();ni(u,o);ni(u,l);n._entering=false;li.off(u,n._enterEnd)};if(this._lastVNode){var f=this._lastVNode.children;if(f._leaving){li.off(u,f._leaveEnd);f._unmountCancelled=true;f._leaveEnd()}}if(r||!this.isRender){this._entering=true;this._enter(this._enterEnd,o,l)}u._unmount=function(e,r){n._unmount(t,i,r)}},_unmount:function e(t,i,n){var r=this;var s=this.element;var a=this.get("a:transition");if(!n._reserve){n._reserve={}}n._reserve[i.key]=i;this._leaving=true;if(this._entering){li.off(s,this._enterEnd);this._enterEnd()}this._leaveEnd=function(e){e&&e.stopPropagation();ni(s,a+"-leave");ni(s,a+"-leave-active");if(!r._unmountCancelled){n.removeChild(s)}r._leaving=false;delete n._reserve[i.key];li.off(s,r._leaveEnd)};this._leave(this._leaveEnd)},_enter:function e(t,i,n){var r=this.element;ti(r,i);li.on(r,t);ei(function(){ti(r,n)})},_leave:function e(t){var i=this.get("a:transition");var n=this.element;ti(n,i+"-leave");li.on(n,t);ei(function(){ti(n,i+"-leave-active")})}});var Gt=window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout;function ei(e){Gt(function(){return Gt(e)})}function ti(e,t){if(t){if(e.classList){e.classList.add(t)}else if(!ii(e,t)){e.className+=" "+t}}return e}function ii(e,t){if(e.classList){return!!t&&e.className.contains(t)}return(" "+e.className+" ").indexOf(" "+t+" ")>-1}function ni(e,t){if(t){if(e.classList){e.classList.remove(t)}else if(ii(e,t)){e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}}}var ri={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}};var si=[];function ai(){var e=document.createElement("div");var t=e.style;if(!("AnimationEvent"in window)){delete ri.animationend.animation}if(!("TransitionEvent"in window)){delete ri.transitionend.transition}for(var i in ri){var n=ri[i];for(var r in n){if(r in t){si.push(n[r]);break}}}}ai();function ui(e,t,i){e.addEventListener(t,i,false)}function oi(e,t,i){e.removeEventListener(t,i,false)}var li={on:function e(t,i){if(si.length===0){window.setTimeout(i,0);return}si.forEach(function(e){ui(t,e,i)})},off:function e(t,i){if(si.length===0){return}si.forEach(function(e){oi(t,e,i)})},one:function e(t,i){var n=function e(){i.apply(this,arguments);li.off(t,e)};li.on(t,n)}};Kt.prototype.Animate=Zt;Kt.Animate=Zt;Kt.Vdt=Qt;Qt.configure({getModel:function e(t,i){return t.get(i)},setModel:function e(t,i,n){t.set(i,n)}});return Kt});