(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.Intact=t()})(this,function(){"use strict";var e={};var t=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var n=Object.prototype.toString;var r=typeof document==="undefined"?e:document;var s=Array.isArray||function(e){return n.call(e)==="[object Array]"};function a(e){return(typeof e==="undefined"?"undefined":t(e))==="object"&&e!==null}function o(e){var i=typeof e==="undefined"?"undefined":t(e);return i==="string"||i==="number"}function u(e){return e===null||e===undefined}function f(e){return e&&typeof e.init==="function"}function l(e){return e.substr(0,3)==="ev-"}var c=function(){if(Array.prototype.indexOf){return function(e,t){return e.indexOf(t)}}else{return function(e,t){for(var i=0;i<e.length;i++){if(e[i]===t){return i}}return-1}}}();var h=Object.create;var v=function(){if(h){return function(e){return h(e)}}else{return function(e){function t(){}t.prototype=e;return new t}}}();var d=typeof Map==="function"?Map:function(){function e(){this._keys=[];this._values=[];this.size=0}e.prototype.set=function(e,t){var i=c(this._keys,e);if(!~i){i=this._keys.push(e)-1;this.size++}this._values[i]=t;return this};e.prototype.get=function(e){var t=c(this._keys,e);if(!~t)return;return this._values[t]};e.prototype.delete=function(e){var t=c(this._keys,e);if(!~t)return false;this._keys.splice(t,1);this._values.splice(t,1);this.size--;return true};return e}();var p={key:true,ref:true,children:true,className:true};var m={muted:true,scoped:true,loop:true,open:true,checked:true,"default":true,capture:true,disabled:true,readOnly:true,required:true,autoplay:true,controls:true,seamless:true,reversed:true,allowfullscreen:true,novalidate:true,hidden:true,autoFocus:true,selected:true};var _={volume:true,defaultChecked:true};function y(){this.queue=[]}y.prototype.push=function(e){this.queue.push(e)};y.prototype.trigger=function(){var e=this.queue;var t=void 0;while(t=e.shift()){t()}};var g={};if(typeof navigator!=="undefined"){var b=navigator.userAgent;var S=b.indexOf("MSIE ");if(~S){g.isIE=true;var x=parseInt(b.substring(S+5,b.indexOf(".",S)),10);g.version=x;g.isIE8=x===8}}var k=g.isIE8?function(e,t){e.innerText=t}:function(e,t){e.textContent=t};var E=0;var w={JS:E++,JSXText:E++,JSXElement:E++,JSXExpressionContainer:E++,JSXAttribute:E++,JSXEmptyExpression:E++,JSXWidget:E++,JSXVdt:E++,JSXBlock:E++,JSXComment:E++,JSXDirective:E++};var J=[];for(var X in w){J[w[X]]=X}var C={area:true,base:true,br:true,col:true,embed:true,hr:true,img:true,input:true,keygen:true,link:true,menuitem:true,meta:true,param:true,source:true,track:true,wbr:true};var A={style:true,script:true,textarea:true};var T={"v-if":true,"v-else-if":true,"v-else":true,"v-for":true,"v-for-value":true,"v-for-key":true};var N={autoReturn:true,onlySource:false,delimiters:["{","}"],noWith:false,server:false,skipWhitespace:false};var j=Object.prototype.hasOwnProperty;var I=function ri(){};function L(e){if(u(e))return false;var t=e.length;return typeof t==="number"&&t>-1&&t%1===0&&t<=9007199254740991&&typeof e!=="function"}function O(e,t,i){if(L(e)){for(var n=0,r=e.length;n<r;n++){t.call(i,e[n],n,e)}}else if(V(e)){for(var s in e){if(j.call(e,s)){t.call(i,e[s],s,e)}}}}function V(e){var i=typeof e==="undefined"?"undefined":t(e);return i==="function"||i==="object"&&!!e}function D(e,t,i){var n=[];O(e,function(e,r,s){n.push(t.call(i,e,r,s))});return n}function M(e){if(u(e))return;if(typeof e==="string")return e;var t=[];for(var i in e){if(j.call(e,i)&&e[i]){t.push(i)}}return t.join(" ")}function W(e){return e<=160&&e>=9&&e<=13||e==32||e==160||e==5760||e==6158||e>=8192&&(e<=8202||e==8232||e==8233||e==8239||e==8287||e==12288||e==65279)}function P(e){var t=e.length;while(t--&&W(e.charCodeAt(t))){}return e.slice(0,t+1)}function B(e){var t=e.length,i=-1;while(i++<t&&W(e.charCodeAt(i))){}return e.slice(i)}function z(e){if(!s(e)){throw new Error('The parameter must be an array like ["{{", "}}"]')}N.delimiters=e}function F(){return N.delimiters}function H(e){if(e!==undefined){U(N,e)}return N}function K(e){return C[e]}function $(e){return A[e]}function R(e){return j.call(T,e)}function U(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++){t[i]=arguments[i]}var n=t[0];var r=t.length;if(r>1){for(var s=1;s<r;s++){var a=t[s];if(a){for(var o in a){if(j.call(a,o)){n[o]=a[o]}}}}}return n}var q=function(){var e=typeof console!=="undefined";return e?function(e){console.error(e)}:I}();var Y=(Object.freeze||Object)({isNullOrUndefined:u,isArray:s,Type:w,TypeName:J,SelfClosingTags:C,TextTags:A,Directives:T,Options:N,hasOwn:j,noop:I,each:O,isObject:V,map:D,className:M,isWhiteSpace:W,trimRight:P,trimLeft:B,setDelimiters:z,getDelimiters:F,configure:H,isSelfClosingTag:K,isTextTag:$,isDirective:R,extend:U,error:q});function Q(e,t){var i=function n(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++){i[r]=arguments[r]}if(!this||!(this instanceof n||this.prototype instanceof n)){return e.apply(n,i)}return e.apply(this,i)};i.prototype=G(e.prototype);O(t,function(t,n){if(n==="displayName"){i.displayName=t}if(!ee(t)||n==="template"){i.prototype[n]=t;return}i.prototype[n]=function(){var i=function s(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++){i[r]=arguments[r]}return e.prototype[n].apply(this,i)},r=function a(t){return e.prototype[n].apply(this,t)};return function(){var e=this||{},n=e._super,s=e._superApply,a=void 0;e._super=i;e._superApply=r;for(var o=arguments.length,u=Array(o),f=0;f<o;f++){u[f]=arguments[f]}a=t.apply(this,u);e._super=n;e._superApply=s;return a}}()});i.__super=e.prototype;i.prototype.constructor=i;U(i,e);return i}var Z=Object.create;function G(e){if(Z){return Z(e)}else{var t=function i(){};t.prototype=e;return new t}}function ee(e){return typeof e==="function"}function te(e,t,i){var n=u(e)?undefined:e[t];if(n===undefined){n=i}return ee(n)?n.call(e):n}var ie=Object.prototype.toString;var ne=function si(e,i,n,r){if(e===i)return e!==0||1/e===1/i;if(u(e)||u(i))return e===i;var s=ie.call(e);if(s!==ie.call(i))return false;switch(s){case"[object RegExp]":case"[object String]":return""+e===""+i;case"[object Number]":if(+e!==+e)return+i!==+i;return+e===0?1/+e===1/i:+e===+i;case"[object Date]":case"[object Boolean]":return+e===+i}var a=s==="[object Array]";if(!a){if((typeof e==="undefined"?"undefined":t(e))!="object"||(typeof i==="undefined"?"undefined":t(i))!="object")return false;var o=e.constructor,f=i.constructor;if(o!==f&&!(ee(o)&&o instanceof o&&ee(f)&&f instanceof f)&&"constructor"in e&&"constructor"in i){return false}}n=n||[];r=r||[];var l=n.length;while(l--){if(n[l]===e)return r[l]===i}n.push(e);r.push(i);if(a){l=e.length;if(l!==i.length)return false;while(l--){if(!si(e[l],i[l],n,r))return false}}else{var c=oe(e),h;l=c.length;if(oe(i).length!==l)return false;while(l--){h=c[l];if(!(j.call(i,h)&&si(e[h],i[h],n,r)))return false}}n.pop();r.pop();return true};function re(e,t){return ne(e,t)}var se=0;function ae(e){var t=++se+"";return e?e+t:t}var oe=Object.keys||function(e){var t=[];O(e,function(e,i){return t.push(i)});return t};function ue(e){var t=[];O(e,function(e){return t.push(e)});return t}var fe={};var le=/^\./;var ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var he=/\\(\\)?/g;var ve=/^(?:0|[1-9]\d*)$/;function de(e){if(typeof e!=="string")return e;if(fe[e])return fe[e];var t=[];if(le.test(e)){te.push("")}e.replace(ce,function(i,n,r,s){t.push(r?e.replace(he,"$1"):n||i)});fe[e]=t;return t}function pe(e){return(typeof e==="number"||ve.test(e))&&e>-1&&e%1===0}function me(e,t,i){if(j.call(e,t))return e[t];t=de(t);var n=0,r=t.length;while(!u(e)&&n<r){e=e[t[n++]]}return n&&n===r?e:i}function _e(e,t,i){if(j.call(e,t)){e[t]=i;return e}t=de(t);var n=-1,r=t.length,s=r-1,a=e;while(!u(a)&&++n<r){var o=t[n],f=i;if(n!==s){var l=a[o];f=V(l)?l:pe(t[n+1])?[]:{}}a[o]=f;a=a[o]}return e}var ye=w;var ge=J;var be=/^<\w+:?\s*[\w\/>]/;function Se(e){return e===58||e===95||e===45||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57}function xe(){this.source="";this.index=0;this.length=0}xe.prototype={constructor:xe,parse:function ai(e,t){this.source=P(e);this.index=0;this.line=1;this.column=1;this.length=this.source.length;this.options=U({},H(),t);return this._parseTemplate()},_parseTemplate:function oi(){var e=[],t={count:0};while(this.index<this.length&&t.count>=0){e.push(this._advance(t))}return e},_advance:function ui(e){var t=this._char();if(t!=="<"){return this._scanJS(e)}else{return this._scanJSX()}},_scanJS:function fi(e){var t=this.index,i=this.options.delimiters;while(this.index<this.length){var n=this._char();if(n==="'"||n==='"'){this._scanStringLiteral()}else if(this._isElementStart()){break}else{if(n==="{"){e.count++}else if(e.count>0&&n==="}"){e.count--}else if(this._isExpect(i[1])){e.count--;break}else if(n==="\n"){this._updateLine()}this._updateIndex()}}return this._type(ye.JS,{value:this.source.slice(t,this.index)})},_scanStringLiteral:function li(){var e=this._char(),t=this.index,i="";this._updateIndex();while(this.index<this.length){var n=this._char();if(n.charCodeAt(0)===10){this._updateLine()}this._updateIndex();if(n===e){e="";break}else if(n==="\\"){i+=this._char(this._updateIndex())}else{i+=n}}if(e!==""){this._error("Unclosed quote")}return this._type(ye.StringLiteral,{value:this.source.slice(t,this.index)})},_scanJSX:function ci(){return this._parseJSXElement()},_scanJSXText:function hi(e){var t=this.index,i=e.length,n,r,s=false;e:while(this.index<this.length){r=this._charCode();if(W(r)){if(r===10){this._updateLine()}if(this.options.skipWhitespace&&!s){t++}}else{s=true;for(n=0;n<i;n++){if(typeof e[n]==="function"&&e[n].call(this)||this._isExpect(e[n])){break e}}}this._updateIndex()}return t===this.index?null:this._type(ye.JSXText,{value:this.source.slice(t,this.index)})},_scanJSXStringLiteral:function vi(){var e=this._char();if(e!=="'"&&e!=='"'){this._error("String literal must starts with a qoute")}this._updateIndex();var t=this._scanJSXText([e]);this._updateIndex();return t},_parseJSXElement:function di(){this._expect("<");var e=this.index,t={},i=this._charCode();if(i>=65&&i<=90){this._type(ye.JSXWidget,t)}else if(this._isExpect("!--")){return this._parseJSXComment()}else if(this._charCode(this.index+1)===58){e+=2;switch(i){case 116:this._type(ye.JSXVdt,t);break;case 98:this._type(ye.JSXBlock,t);break;default:this._error("Unknown directive "+String.fromCharCode(i)+":")}this._updateIndex(2)}else{this._type(ye.JSXElement,t)}while(this.index<this.length){if(!Se(this._charCode())){break}this._updateIndex()}t.value=this.source.slice(e,this.index);return this._parseAttributeAndChildren(t)},_parseAttributeAndChildren:function pi(e){var t=this._parseJSXAttribute();U(e,{attributes:t.attributes,directives:t.directives,children:[]});if(!e.directives.length)delete e.directives;if(e.type===ye.JSXElement&&K(e.value)){if(this._char()==="/"){this._updateIndex()}this._expect(">")}else if(this._char()==="/"){this._updateIndex();this._expect(">")}else{this._expect(">");e.children=this._parseJSXChildren(e)}return e},_parseJSXAttribute:function mi(){var e={attributes:[],directives:[]};while(this.index<this.length){this._skipWhitespace();if(this._char()==="/"||this._char()===">"){break}else{var t=this._parseJSXAttributeName();if(this._char()==="="){this._updateIndex();t.value=this._parseJSXAttributeValue()}e[t.type===ye.JSXAttribute?"attributes":"directives"].push(t)}}return e},_parseJSXAttributeName:function _i(){var e=this.index;if(!Se(this._charCode())){this._error("Unexpected identifier "+this._char())}while(this.index<this.length){var t=this._charCode();if(!Se(t)){break}this._updateIndex()}var i=this.source.slice(e,this.index);if(R(i)){return this._type(ye.JSXDirective,{name:i})}return this._type(ye.JSXAttribute,{name:i})},_parseJSXAttributeValue:function yi(){var e,t=this.options.delimiters;if(this._isExpect(t[0])){e=this._parseJSXExpressionContainer()}else{e=this._scanJSXStringLiteral()}return e},_parseJSXExpressionContainer:function gi(){var e,t=this.options.delimiters;this._expect(t[0]);if(this._isExpect(t[1])){e=this._parseJSXEmptyExpression()}else{e=this._parseExpression()}this._expect(t[1]);return this._type(ye.JSXExpressionContainer,{value:e})},_parseJSXEmptyExpression:function bi(){return this._type(ye.JSXEmptyExpression,{value:null})},_parseExpression:function Si(){return this._parseTemplate()},_parseJSXChildren:function xi(e){var t=[],i=e.value+">",n=null;switch(e.type){case ye.JSXBlock:i="</b:"+i;break;case ye.JSXVdt:i="</t:"+i;break;case ye.JSXElement:default:i="</"+i;break}while(this.index<this.length){if(this._isExpect(i)){break}n=this._parseJSXChild(e,i,n);if(n){t.push(n)}}this._parseJSXClosingElement();return t},_parseJSXChild:function ki(e,t,i){var n,r=this.options.delimiters;if(this._isExpect(r[0])){n=this._parseJSXExpressionContainer()}else if($(e.value)){n=this._scanJSXText([t,r[0]])}else if(this._isElementStart()){n=this._parseJSXElement()}else{n=this._scanJSXText([function(){return this._isExpect(t)||this._isElementStart()},r[0]])}if(n){n.prev=undefined;n.next=undefined;if(i){i.next=n;n.prev=i}}return n},_parseJSXClosingElement:function Ei(){this._expect("</");while(this.index<this.length){if(!Se(this._charCode())){break}this._updateIndex()}this._skipWhitespace();this._expect(">")},_parseJSXComment:function wi(){this._expect("!--");var e=this.index;while(this.index<this.length){if(this._isExpect("-->")){break}else if(this._charCode()===10){this._updateLine()}this._updateIndex()}var t=this._type(ye.JSXComment,{value:this.source.slice(e,this.index)});this._expect("-->");return t},_char:function Ji(e){arguments.length===0&&(e=this.index);return this.source.charAt(e)},_charCode:function Xi(e){arguments.length===0&&(e=this.index);return this.source.charCodeAt(e)},_skipWhitespace:function Ci(){while(this.index<this.length){var e=this._charCode();if(!W(e)){break}else if(e===10){this._updateLine()}this._updateIndex()}},_expect:function Ai(e){if(!this._isExpect(e)){this._error("expect string "+e)}this._updateIndex(e.length)},_isExpect:function Ti(e){return this.source.slice(this.index,this.index+e.length)===e},_isElementStart:function Ni(){return this._char()==="<"&&(this._isExpect("<!--")||be.test(this.source.slice(this.index)))},_type:function ji(e,t){t||(t={});t.type=e;t.typeName=ge[e];t.line=this.line;t.column=this.column;return t},_updateLine:function Ii(){this.line++;this.column=0},_updateIndex:function Li(e){e===undefined&&(e=1);var t=this.index;this.index=this.index+e;this.column=this.column+e;return t},_error:function Oi(e){throw new Error(e+" At: {line: "+this.line+", column: "+this.column+'} Near: "'+this.source.slice(this.index-10,this.index+20)+'"')}};var ke=w;var Ee=J;var we=function(){var e={"class":"className","for":"htmlFor"};return function(t){return e[t]||t}}();var Je=function Vi(e){var t=e.length-1;for(var i=t;i>=0;i--){if(e[i]!=="null"){break}}return(i===t?e:e.slice(0,i+1)).join(", ")};function Xe(){}Xe.prototype={constructor:Xe,stringify:function Di(e,t){if(arguments.length===1){t=true}this.autoReturn=!!t;this.enterStringExpression=false;return this._visitJSXExpressionContainer(e,true)},_visitJSXExpressionContainer:function Mi(e,t){var i="",n=e.length;O(e,function(e,r){if(this.autoReturn&&t&&r===n-1){i+="return "+this._visit(e,t)}else{i+=this._visit(e,t)}},this);if(!t&&!this.enterStringExpression){i="function() {try {return ["+i+"][0]} catch(e) {_e(e)}}.call(this)"}return i},_visit:function Wi(e,t){e=e||{};switch(e.type){case ke.JS:return this._visitJS(e,t);case ke.JSXElement:return this._visitJSX(e);case ke.JSXText:return this._visitJSXText(e);case ke.JSXExpressionContainer:return this._visitJSXExpressionContainer(e.value);case ke.JSXWidget:return this._visitJSXWidget(e);case ke.JSXBlock:return this._visitJSXBlock(e);case ke.JSXVdt:return this._visitJSXVdt(e,t);case ke.JSXComment:return this._visitJSXComment(e);default:return"null"}},_visitJS:function Pi(e){return this.enterStringExpression?"("+e.value+")":e.value},_visitJSX:function Bi(e){if(e.value==="script"||e.value==="style"){if(e.children.length){e.attributes.push({type:ke.JSXAttribute,typeName:Ee[ke.JSXAttribute],name:"innerHTML",value:{type:ke.JS,typeName:Ee[ke.JS],value:this._visitJSXChildrenAsString(e.children)}});e.children=[]}}return this._visitJSXDirective(e,this._visitJSXElement(e))},_visitJSXElement:function zi(e){var t=this._visitJSXAttribute(e.attributes,true,true);return"h("+Je(["'"+e.value+"'",t.props,this._visitJSXChildren(e.children),t.className,t.key,t.ref])+")"},_visitJSXChildren:function Fi(e){var t=[];O(e,function(e){if(e._skip)return;t.push(this._visit(e))},this);return t.length>1?"["+t.join(", ")+"]":t[0]||"null"},_visitJSXDirective:function Hi(e,t){var i={data:null,value:"value",key:"key"};O(e.directives,function(n){switch(n.name){case"v-if":t=this._visitJSXDirectiveIf(n,t,e);break;case"v-else-if":case"v-else":if(e._skip)break;throw new Error(n.name+" must be led with v-if. At: {line: "+e.line+", column: "+e.column+"}");case"v-for":i.data=this._visitJSXAttributeValue(n.value);break;case"v-for-value":i.value=this._visitJSXText(n.value,true);break;case"v-for-key":i.key=this._visitJSXText(n.value,true);break;default:break}},this);if(i.data){t=this._visitJSXDirectiveFor(i,t)}return t},_visitJSXDirectiveIf:function Ki(e,t,i){var n=this._visitJSXAttributeValue(e.value)+" ? "+t+" : ",r=false,s=i,a=[],o=function v(){O(a,function(e){e._skip=true});a=[]};while(s=s.next){if(s.type===w.JSXText){if(!/^\s*$/.test(s.value))break;else a.push(s)}else if(s.type===w.JSXElement||s.type===w.JSXWidget){if(!s.directives||!s.directives.length)break;var u=false;for(var f=0,l=s.directives.length;f<l;f++){var c=s.directives[f],h=c.name;if(h==="v-else-if"){s._skip=true;n+=this._visitJSXAttributeValue(c.value)+" ? "+this._visit(s)+" : ";u=true;o();break}else if(h==="v-else"){s._skip=true;n+=this._visit(s);r=true;o();break}}if(!u)break}}if(!r)n+="undefined";return n},_visitJSXDirectiveFor:function $i(e,t){return"_Vdt.utils.map("+e.data+", function("+e.value+", "+e.key+") {\n"+"return "+t+";\n"+"}, this)"},_visitJSXChildrenAsString:function Ri(e){var t=[];this.enterStringExpression=true;O(e,function(e){t.push(this._visit(e))},this);this.enterStringExpression=false;return t.join("+")},_visitJSXAttribute:function Ui(e,t,i){var n=[],r,s,a;O(e,function(e){var o=we(e.name),u=this._visitJSXAttributeValue(e.value);if(o==="widget"&&e.value.type===ke.JSXText){a="function(i) {widgets["+u+"] = i}";return}else if(o==="className"){if(e.value.type===ke.JSXExpressionContainer){u="_Vdt.utils.className("+u+")"}if(t){r=u;return}}else if(o==="key"&&i){s=u;return}else if(o==="ref"&&i){a=u;return}n.push("'"+o+"': "+u)},this);return{props:n.length?"{"+n.join(", ")+"}":"null",className:r||"null",ref:a||"null",key:s||"null"}},_visitJSXAttributeValue:function qi(e){return s(e)?this._visitJSXChildren(e):this._visit(e)},_visitJSXText:function Yi(e,t){var i=e.value.replace(/([\'\"\\])/g,"\\$1").replace(/[\r\n]/g,"\\n");if(!t){i="'"+i+"'"}return i},_visitJSXWidget:function Qi(e){if(e.children.length){e.attributes.push({name:"children",value:e.children})}var t=this._visitJSXAttribute(e.attributes,false,true);return this._visitJSXDirective(e,"h("+Je([e.value,t.props,"null","null",t.key,t.ref])+")")},_visitJSXBlock:function Zi(e,t){arguments.length===1&&(t=true);return"(_blocks."+e.value+" = function(parent) {return "+this._visitJSXChildren(e.children)+";}) && (__blocks."+e.value+" = function(parent) {\n"+"var self = this;\n"+"return blocks."+e.value+" ? blocks."+e.value+".call(this, function() {\n"+"return _blocks."+e.value+".call(self, parent);\n"+"}) : _blocks."+e.value+".call(this, parent);\n"+"})"+(t?" && __blocks."+e.value+".call(this)":"")},_visitJSXVdt:function Gi(e,t){var i=["(function(blocks) {","var _blocks = {}, __blocks = extend({}, blocks), _obj = "+this._visitJSXAttribute(e.attributes,false,false).props+" || {};",'if (_obj.hasOwnProperty("arguments")) { extend(_obj, _obj.arguments === null ? obj : _obj.arguments); delete _obj.arguments; }',"return "+e.value+".call(this, _obj, _Vdt, "].join("\n"),n=[];O(e.children,function(e){if(e.type===ke.JSXBlock){n.push(this._visitJSXBlock(e,false))}},this);i+=(n.length?n.join(" && ")+" && __blocks)":"__blocks)")+"}).call(this, "+(t?"blocks)":"{})");return i},_visitJSXComment:function en(e){return"hc("+this._visitJSXText(e)+")"}};var Ce={Text:1,HtmlElement:1<<1,ComponentClass:1<<2,ComponentFunction:1<<3,ComponentInstance:1<<4,HtmlComment:1<<5};Ce.Element=Ce.HtmlElement;Ce.ComponentClassOrInstance=Ce.ComponentClass|Ce.ComponentInstance;Ce.TextElement=Ce.Text|Ce.HtmlComment;var Ae={};if("production"!=="production"&&!g.isIE){Object.freeze(Ae)}function Te(e,t,i,n,r,s,a){this.type=e;this.tag=t;this.props=i;this.children=n;this.key=s;this.ref=a;this.className=r}function Ne(e,i,n,r,s,a){var o=void 0;i||(i=Ae);switch(typeof e==="undefined"?"undefined":t(e)){case"string":o=Ce.HtmlElement;break;case"function":if(e.prototype.init){o=Ce.ComponentClass}else{o=Ce.ComponentFunction}break;default:throw new Error("unknown vNode type: "+e)}if(i.children){i.children=Oe(i.children)}return new Te(o,e,i,Oe(n),r||i.className,s||i.key,a||i.ref)}function je(e){return new Te(Ce.HtmlComment,null,Ae,e)}function Ie(e){return new Te(Ce.Text,null,Ae,e)}function Le(e){var t=e.props||Ae;return new Te(Ce.ComponentInstance,e.constructor,t,e,null,t.key,t.ref)}function Oe(e){if(s(e)){var t=De(e,{index:0});return t.length?t:null}else if(f(e)){return Le(e)}return e}function Ve(e,t){if(u(e.key)){e.key=".$"+t.index++}return e}function De(e,t){var i=void 0;for(var n=0;n<e.length;n++){var r=e[n];if(u(r)){if(!i){i=e.slice(0,n)}}else if(s(r)){if(!i){i=e.slice(0,n)}i=i.concat(De(r,t))}else if(o(r)){if(!i){i=e.slice(0,n)}i.push(Ve(Ie(r),t))}else if(f(r)){if(!i){i=e.slice(0,n)}i.push(Ve(Le(r)),t)}else if(r.type){if(!i){i=e.slice(0,n)}i.push(Ve(r,t))}}return i||e}var Me=["altKey","bubbles","cancelable","ctrlKey","eventPhase","metaKey","relatedTarget","shiftKey","target","timeStamp","type","view","which"];var We=["char","charCode","key","keyCode"];var Pe=["button","buttons","clientX","clientY","layerX","layerY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement"];var Be=/^key|input/;var ze=/^(?:mouse|pointer|contextmenu)|click/;function Fe(e){for(var t=0;t<Me.length;t++){var i=Me[t];this[i]=e[i]}if(!e.target){this.target=e.srcElement}this._rawEvent=e}Fe.prototype.preventDefault=function(){var e=this._rawEvent;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}};Fe.prototype.stopPropagation=function(){var e=this._rawEvent;e.cancelBubble=true;e.stopImmediatePropagation&&e.stopImmediatePropagation()};function He(e){Fe.call(this,e);for(var t=0;t<Pe.length;t++){var i=Pe[t];this[i]=e[i]}}He.prototype=v(Fe.prototype);He.prototype.constructor=He;function Ke(e){Fe.call(this,e);for(var t=0;t<We.length;t++){var i=We[t];this[i]=e[i]}}Ke.prototype=v(Fe.prototype);Ke.prototype.constructor=Ke;function $e(e){if(Be.test(e.type)){return new Ke(e)}else if(ze.test(e.type)){return new He(e)}else{return new Fe(e)}}var Re=void 0;var Ue=void 0;if("addEventListener"in r){Re=function tn(e,t){r.addEventListener(e,t,false)};Ue=function nn(e,t){r.removeEventListener(e,t)}}else{Re=function rn(e,t){r.attachEvent("on"+e,t)};Ue=function sn(e,t){r.detachEvent("on"+e,t)}}var qe={};function Ye(e,t,i,n){var r=qe[e];if(i){if(!r){r={items:new d,docEvent:null};r.docEvent=Ze(e,r);qe[e]=r}r.items.set(n,i)}else if(r){var s=r.items;if(s.delete(n)){if(s.size===0){Ue(e,r.docEvent);delete r[e]}}}}function Qe(e,t,i,n,r){var s=i.get(t);if(s){n--;e.currentTarget=t;s(e);if(e._rawEvent.cancelBubble){return}}if(n>0){var a=t.parentNode;if(u(a)||r&&a.nodeType===1&&a.disabled){return}Qe(e,a,i,n,r)}}function Ze(e,t){var i=function n(e){var i=t.items.size;e||(e=window.event);if(i>0){e=$e(e);Qe(e,e.target,t.items,i,e.type==="click")}};Re(e,i);return i}function Ge(e,t,i){if(u(e))return;var n=false;if(t||!i){i=new y;n=true}var r=et(e,t,i);if(n){i.trigger()}return r}function et(e,t,i){var n=e.type;if(n&Ce.HtmlElement){return tt(e,t,i)}else if(n&Ce.Text){return it(e,t)}else if(n&Ce.ComponentClassOrInstance){return nt(e,t,i)}else if(n&Ce.ComponentFunction){return rt(e,t,i)}else if(n&Ce.HtmlComment){return st(e,t)}else{throw new Error("unknown vnode type "+n)}}function tt(e,t,i){var n=r.createElement(e.tag);var s=e.children;var a=e.ref;var o=e.props;var f=e.className;e.dom=n;if(!u(s)){ot(s,n,i)}if(!u(f)){n.className=f}if(o!==Ae){for(var l in o){Tt(l,null,o[l],n)}}if(!u(a)){mt(n,a,i)}if(t){t.appendChild(n)}return n}function it(e,t){var i=r.createTextNode(e.children);e.dom=i;if(t){t.appendChild(i)}return i}function nt(e,t,i,n){var r=e.props;var s=e.type&Ce.ComponentClass?new e.tag(r):e.children;s.parentDom=null;s.mountedQueue=i;var a=s.init(n,e);var o=e.ref;e.dom=a;e.children=s;if(t){t.appendChild(a)}if(typeof s.mount==="function"){i.push(function(){return s.mount(n,e)})}if(typeof o==="function"){o(s)}return a}function rt(e,t,i){var n=e.props;var r=e.ref;at(e);var s=et(e.children,null,i);e.dom=s;if(t){t.appendChild(s)}if(r){mt(s,r,i)}return s}function st(e,t){var i=r.createComment(e.children);e.dom=i;if(t){t.appendChild(i)}return i}function at(e){var t=e.tag(e.props);if(s(t)){throw new Error("ComponentFunction "+e.tag.name+" returned a invalid vNode")}else if(o(t)){t=Ie(t)}e.children=t;return e}function ot(e,t,i){if(o(e)){k(t,e)}else if(s(e)){for(var n=0;n<e.length;n++){et(e[n],t,i)}}else{et(e,t,i)}}function ut(e,t){if(u(e)){return}else if(s(e)){for(var i=0;i<e.length;i++){ft(e[i],t)}}else{ft(e,t)}}function ft(e,t){var i=e.type;if(i&Ce.Element){return lt(e,t)}else if(i&Ce.TextElement){return ct(e,t)}else if(i&Ce.ComponentClassOrInstance){return vt(e,t)}else if(i&Ce.ComponentFunction){return ht(e,t)}}function lt(e,t){var i=e.ref;var n=e.props;var r=e.dom;if(i){i(null)}ut(e.children,null);for(var s in n){var a=n[s];if(!u(a)&&l(s)){Ye(s.substr(0,3),a,null,r)}}if(t){t.removeChild(r)}}function ct(e,t){if(t){t.removeChild(e.dom)}}function ht(e,t){var i=e.ref;if(i){i(null)}ft(e.children,t)}function vt(e,t,i){var n=e.children;var r=e.ref;if(typeof n.destroy==="function"){n.destroy(e,i)}if(r){r(null)}if(t){t.removeChild(e.dom)}}function dt(e,t){k(e,"");ut(t)}function pt(e,t,i){if(!e)e=i.parentNode;e.replaceChild(t,i)}function mt(e,t,i){if(typeof t==="function"){i.push(function(){return t(e)})}else{throw new Error('ref must be a function, but got "'+JSON.stringify(t)+'"')}}function _t(e,t,i){var n=new y;var r=yt(e,t,i,n);n.trigger();return r}function yt(e,t,i,n){if(e!==t){var r=t.type;var s=e.type;if(r&Ce.Element){if(s&Ce.Element){gt(e,t,i,n)}else{Xt(e,t,i,n)}}else if(r&Ce.TextElement){if(s&Ce.TextElement){Ct(e,t)}else{Xt(e,t,i,n)}}else if(r&Ce.ComponentClass){if(s&Ce.ComponentClass){bt(e,t,i,n)}else{Xt(e,t,i,n)}}else if(r&Ce.ComponentFunction){if(s&Ce.ComponentFunction){xt(e,t,i,n)}else{Xt(e,t,i,n)}}else if(r&Ce.ComponentInstance){if(s&Ce.ComponentInstance){St(e,t,i,n)}else{Xt(e,t,i,n)}}}return t.dom}function gt(e,t,i,n){var r=e.dom;var s=e.props;var a=t.props;var o=e.children;var f=t.children;var l=t.ref;var c=e.className;var h=t.className;t.dom=r;if(e.tag!==t.tag){Xt(e,t,i,n)}else{if(o!==f){kt(o,f,r,n)}if(s!==a){At(e,t)}if(c!==h){if(u(h)){r.removeAttribute("class")}else{r.className=h}}if(!u(l)&&e.ref!==l){mt(r,l,n)}}}function bt(e,t,i,n){var r=e.tag;var s=t.tag;var a=e.dom;var o=void 0;var u=void 0;if(r!==s||e.key!==t.key){vt(e,null,t);u=nt(t,null,n,e)}else{o=e.children;u=o.update(e,t);t.dom=u;t.children=o}if(a!==u){pt(i,u,a)}}function St(e,t,i,n){var r=e.children;var s=t.children;var a=e.dom;var o=void 0;if(r!==s){vt(e,null,t);o=nt(t,null,n,e)}else{o=r.update(e,t);t.dom=o}if(a!==o){pt(i,o,a)}}function xt(e,t,i,n){var r=e.tag;var s=t.tag;if(e.key!==t.key){ft(e.children,i);rt(t,i,n)}else{t.dom=e.dom;at(t);yt(e.children,t.children,i,n)}}function kt(e,t,i,n){if(u(e)){if(!u(t)){ot(t,i,n)}}else if(u(t)){ut(e,i)}else if(o(t)){if(o(e)){i.firstChild.nodeValue=t}else{ut(e,i);k(i,t)}}else if(s(e)){if(s(t)){Et(e,t,i,n)}else{ut(e,i);et(t,i,n)}}else if(s(t)){ft(e,i);ot(t,i,n)}else if(o(e)){k(i,"");et(t,i)}else{yt(e,t,i,n)}}function Et(e,t,i,n){var r=e.length;var s=t.length;var a=r-1;var o=s-1;var u=0;var f=0;var l=void 0;var c=void 0;var h=void 0;var v=void 0;var d=void 0;var p=void 0;var m=void 0;var _=e[u];var y=t[f];var g=e[a];var b=t[o];e:while(true){while(_.key===y.key){yt(_,y,i,n);++u;++f;if(u>a||f>o){break e}_=e[u];y=t[f]}while(g.key===b.key){yt(g,b,i,n);--a;--o;if(a<u||o<f){break e}g=e[a];b=t[o]}if(g.key===y.key){yt(g,y,i,n);i.insertBefore(y.dom,_.dom);--a;++f;g=e[a];y=t[f];continue}if(_.key===b.key){yt(_,b,i,n);Jt(o,s,b.dom,t,i);++u;--o;_=e[u];b=t[o];continue}break}if(u>a){while(f<=o){Jt(o,s,et(t[f],null,n),t,i);++f}}else if(f>o){while(u<=a){ft(e[u],i);++u}}else{r=a-u+1;s=o-f+1;var S=new Array(s);for(l=0;l<s;l++){S[l]=-1}var x=false;var k=0;var E=0;if(s<=4||r*s<=16){for(l=u;l<=a;l++){h=e[l];if(E<s){for(c=f;c<=o;c++){v=t[c];if(h.key===v.key){S[c-f]=l;if(k>c){x=true}else{k=c}yt(h,v,i,n);++E;e[l]=null;break}}}}}else{var w={};for(l=f;l<=o;l++){w[t[l].key]=l}for(l=u;l<=a;l++){h=e[l];if(E<s){c=w[h.key];if(c!==undefined){v=t[c];S[c-f]=l;if(k>c){x=true}else{k=c}yt(h,v,i,n);++E;e[l]=null}}}}if(r===e.length&&E===0){dt(i,e);while(f<s){et(t[f],i,n);++f}}else{if(x){var J=wt(S);c=J.length-1;for(l=s-1;l>=0;l--){if(S[l]===-1){k=l+f;Jt(k,t.length,et(t[k],null,n),t,i)}else{if(c<0||l!==J[c]){k=l+f;Jt(k,t.length,t[k].dom,t,i)}else{--c}}}}else if(E!==s){for(l=s-1;l>=0;l--){if(S[l]===-1){k=l+f;Jt(k,t.length,et(t[k],null,n),t,i)}}}l=r-E;while(l>0){h=e[u++];if(h!==null){ft(h,i);--l}}}}}function wt(e){var t=e.slice(0);var i=[0];var n=void 0;var r=void 0;var s=void 0;var a=void 0;var o=void 0;var u=e.length;for(n=0;n<u;n++){var f=e[n];if(f===-1){continue}r=i[i.length-1];if(e[r]<f){t[n]=r;i.push(n);continue}s=0;a=i.length-1;while(s<a){o=(s+a)/2|0;if(e[i[o]]<f){s=o+1}else{a=o}}if(f<e[i[s]]){if(s>0){t[n]=i[s-1]}i[s]=n}}s=i.length;a=i[s-1];while(s-->0){i[s]=a;a=t[a]}return i}function Jt(e,t,i,n,r){var s=e+1;if(s<t){r.insertBefore(i,n[s].dom)}else{r.appendChild(i)}}function Xt(e,t,i,n){if(!i)i=e.dom.parentNode;ft(e,null);et(t,null,n);i.replaceChild(t.dom,e.dom)}function Ct(e,t,i){var n=t.children;var r=e.dom;t.dom=r;if(e.children!==n){r.nodeValue=n}}function At(e,t){var i=e.props;var n=t.props;var r=t.dom;var s=void 0;if(n!==Ae){for(s in n){Tt(s,i[s],n[s],r)}}if(i!==Ae){for(s in i){if(!(s in n)){Nt(s,i[s],r)}}}}function Tt(e,t,i,n){if(t!==i){if(p[e]){return}else if(m[e]){n[e]=!!i}else if(_[e]){var r=u(i)?"":i;if(n[e]!==r){n[e]=r}}else if(u(i)){Nt(e,t,n)}else if(l(e)){Ye(e.substr(3),t,i,n)}else if(a(i)){It(e,t,i,n)}else if(e==="innerHTML"){n.innerHTML=i}else{n.setAttribute(e,i)}}}function Nt(e,t,i){if(!u(t)){switch(e){case"value":i.value="";return;case"style":i.removeAttribute("style");return;case"attributes":for(var n in t){i.removeAttribute(n)}return;case"dataset":jt(t,i);return;default:break}if(m[e]){i[e]=false}else if(l(e)){Ye(e.substr(3),t,null,i)}else if(a(t)){var r=i[e];try{i[e]=undefined;delete i[e]}catch(s){for(var o in t){delete r[o]}}}else{i.removeAttribute(e)}}}var jt=g.isIE?function(e,t){for(var i in e){t.removeAttribute("data-"+Vt(i))}}:function(e,t){var i=t.dataset;for(var n in e){delete i[n]}};function It(e,t,i,n){if(t&&!a(t)&&!u(t)){Nt(e,t,n);t=null}switch(e){case"attributes":return Mt(t,i,n);case"style":return Wt(t,i,n);case"dataset":return Lt(e,t,i,n);default:return Dt(e,t,i,n)}}var Lt=g.isIE?function an(e,t,i,n){var r={};var s=void 0;var a=void 0;for(s in i){var o="data-"+Vt(s);a=i[s];if(u(a)){n.removeAttribute(o);r[s]=true}else{n.setAttribute(o,a)}}if(!u(t)){for(s in t){if(u(i[s])&&!r[s]){n.removeAttribute("data-"+Vt(s))}}}}:Dt;var Ot={};function Vt(e){
if(!Ot[e]){Ot[e]=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}return Ot[e]}function Dt(e,t,i,n){var r=n[e];if(u(r)){r=n[e]={}}var s=void 0;var a=void 0;for(s in i){r[s]=i[s]}if(!u(t)){for(s in t){if(u(i[s])){delete r[s]}}}}function Mt(e,t,i){var n={};var r=void 0;var s=void 0;for(r in t){s=t[r];if(u(s)){i.removeAttribute(r);n[r]=true}else{i.setAttribute(r,s)}}if(!u(e)){for(r in e){if(u(t[r])&&!n[r]){i.removeAttribute(r)}}}}function Wt(e,t,i){var n=i.style;var r={};var s=void 0;var a=void 0;for(s in t){a=t[s];if(u(a)){n[s]="";r[s]=true}else{n[s]=a}}if(!u(e)){for(s in e){if(u(t[s])&&!r[s]){n[s]=""}}}}var Pt=(Object.freeze||Object)({h:Ne,patch:_t,render:Ge,hc:je,remove:ft,MountedQueue:y});var Bt=new xe;var zt=new Xe;function Ft(e,t){if(!(this instanceof Ft))return new Ft(e,t);this.template=Ht(e,t);this.data=null;this.vNode=null;this.node=null;this.widgets={}}Ft.prototype={constructor:Ft,render:function on(e,t,i){this.renderVNode(e);this.node=Ge(this.vNode,t,i);return this.node},renderVNode:function un(e){if(e!==undefined){this.data=e}this.vNode=this.template(this.data,Ft);return this.vNode},renderString:function fn(e){var t=this.render(e);return t.outerHTML||t.toString()},update:function ln(e){var t=this.vNode;this.renderVNode(e);this.node=_t(t,this.vNode);return this.node},destroy:function cn(){ft(this.vNode)}};function Ht(e,i){var n;if(i===true||i===false){i={autoReturn:i}}i=U({},H(),i);switch(typeof e==="undefined"?"undefined":t(e)){case"string":var r=Bt.parse(e,{delimiters:i.delimiters}),s=zt.stringify(r,i.autoReturn);s=["_Vdt || (_Vdt = Vdt);","obj || (obj = {});","blocks || (blocks = {});","var h = _Vdt.miss.h, hc = _Vdt.miss.hc, widgets = this && this.widgets || {}, _blocks = {}, __blocks = {},","extend = _Vdt.utils.extend, _e = _Vdt.utils.error,"+(i.server?'require = function(file) { return _Vdt.require(file, "'+i.filename.replace(/\\/g,"\\\\")+'") }, ':"")+"self = this.data, scope = obj;",i.noWith?s:["with (obj) {",s,"}"].join("\n")].join("\n");n=i.onlySource?function(){}:new Function("obj","_Vdt","blocks",s);n.source="function(obj, _Vdt, blocks) {\n"+s+"\n}";break;case"function":n=e;break;default:throw new Error("Expect a string or function")}return n}Ft.parser=Bt;Ft.stringifier=zt;Ft.miss=Pt;Ft.compile=Ht;Ft.utils=Y;Ft.setDelimiters=z;Ft.getDelimiters=F;Ft.virtualDom=Pt;var Kt=function(){function e(t){var n=this;i(this,e);if(!this.template){throw new Error("Can not instantiate when this.template does not exist.")}t=U({},te(this,"defaults"),t);this._events={};this.props={};this.vdt=Ft(this.template);this.set(t,{silent:true});this.widgets=this.vdt.widgets||{};this._widget=this.props.widget||ae("widget");this.attributes=this.props;this.inited=false;this.rendered=false;this.mounted=false;this.displayName=this.displayName;this.addEvents();this._updateCount=0;var r=function a(){n.inited=true;n.on("change",function(e,t,i){return!i&&n.update()});n.trigger("inited",n)};var s=this._init();if(s&&s.then){s.then(r)}else{r()}}e.prototype.addEvents=function n(){var e=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props;O(t,function(t,i){if(l(i)&&ee(t)){e.on(i.substr(3),t)}})};e.prototype._init=function r(e){};e.prototype._create=function s(e,t){};e.prototype._mount=function a(e,t){};e.prototype._beforeUpdate=function o(e,t){};e.prototype._update=function f(e,t){};e.prototype._destroy=function c(e,t){};e.prototype.init=function h(e,t){var i=this;if(!this.inited){var n=document.createComment("placeholder");this.one("inited",function(){var r=n.parentNode;if(r){r.replaceChild(i.init(e,t),n)}});return n}this.element=this.vdt.render(this,this.parentDom,this.moutedQueue);this.rendered=true;this.trigger("rendered",this);this._create(e,t);return this.element};e.prototype.mount=function v(e,t){this.mounted=true;this.trigger("mounted",this);this._mount(e,t)};e.prototype.update=function d(e,t){if(!this.rendered)return;++this._updateCount;if(this._updateCount>1)return this.element;if(this._updateCount===1)return this.__update(e,t)};e.prototype.__update=function p(e,t){if(t){this._patchProps(e.props,t.props)}this._beforeUpdate(e,t);this.element=this.vdt.update(this);this._update(e,t);if(--this._updateCount>0){this._updateCount=0;return this.__update()}return this.element};e.prototype._patchProps=function m(e,t){e=e||Ae;t=t||Ae;var i=void 0;var n=void 0;if(e!==t){var r=void 0;var s=void 0;if(t!==Ae){for(var a in t){n=t[a];if(l(a)){this.set(a,n,{silent:true});i=e[a];if(ee(n)){var o=a.substr(3);if(ee(i)){this.off(o,i)}this.on(o,n)}else if(ee(i)){this.off(a.substr(3),i)}}else{if(!s){s={}}s[a]=n}}if(e!==Ae){for(var u in e){if(!j.call(t,u)){i=e[u];if(l(u)&&ee(i)){this.set(u,undefined,{silent:true});this.off(u.substr(3),i)}else{if(!r){r={}}r[u]=i}}}}if(s){this.set(s,{update:false})}}else{for(var f in e){i=e[f];if(l(f)&&ee(i)){this.set(f,undefined,{silent:true});this.off(f.substr(3),i)}else{if(!r){r={}}r[f]=i}}}if(r){for(var c in r){this.set(c,undefined,{update:false})}}}};e.prototype.destroy=function _(e,t){this.off();this.vdt.destroy();this._destroy(e,t)};e.prototype.get=function y(e,t){if(e===undefined)return this.props;return me(this.props,e,t)};e.prototype.set=function g(e,i,n){var r=this;if(u(e))return this;var s=false;if((typeof e==="undefined"?"undefined":t(e))==="object"){n=i;s=true}n=U({silent:false,update:true,async:false},n);if(j.call(n,"global")){n.update=n.global}var a=this.props;var o={};var f=false;if(s){if(!n.silent){for(var l in e){var c=e[l];var h=a[l];if(!re(h,c)){o[l]=[h,c];f=true}a[l]=c}}else{U(a,e)}}else{if(!n.silent){var v=me(a,e);if(!re(v,i)){if(!j.call(a,e)){o[e]=[v,i];var d=de(e);var p=[];for(var m=d.length-1;m>0;m--){var _=d.slice(0,m).join(".");var y=me(a,_);o[_]=[y];p.push(_)}_e(a,e,i);for(var g=0;g<p.length;g++){var b=p[g];o[b].push(me(a,b))}}else{o[e]=[v,i];_e(a,e,i)}f=true}else{_e(a,e,i)}}else{_e(a,e,i)}}if(f){for(var S in o){var x=o[S];this.trigger("change:"+S,this,x[1],x[0])}var k=oe(o);this.trigger("change",this,k,true);if(n.update&&this.rendered){clearTimeout(this._asyncUpdate);var E=function w(){r.update();for(var e in o){var t=o[e];r.trigger("changed:"+e,r,t[1],t[0])}r.trigger("changed",r,k)};if(n.async){this._asyncUpdate=setTimeout(E)}else{E()}}}return this};e.prototype.on=function b(e,t){(this._events[e]||(this._events[e]=[])).push(t);return this};e.prototype.one=function S(e,t){var i=this;var n=function r(){for(var n=arguments.length,s=Array(n),a=0;a<n;a++){s[a]=arguments[a]}t.apply(i,s);i.off(e,r)};this.on(e,n);return this};e.prototype.off=function x(e,t){if(e===undefined){this._events={};return this}var i=this._events[e];if(!i)return this;if(t===undefined){delete this._events[e];return this}for(var n,r=0;r<i.length;r++){n=i[r];if(n===t){i.splice(r,1);r--}}return this};e.prototype.trigger=function k(e){var t=this._events[e];if(t){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++){n[r-1]=arguments[r]}for(var s=0,a=t.length;s<a;s++){t[s].apply(this,n)}}return this};return e}();Kt.extend=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.defaults=U({},this.prototype.defaults,e.defaults);return Q(this,e)};Kt.mount=function(e,t){if(!e||!(e.prototype instanceof Kt||e===Kt)){throw new Error("expect for a class component")}var i=new e;i.parentDom=t;if(i.inited){i.init()}else{i.one("inited",function(){return i.init()})}return i};var $t=Kt.extend({displayName:"Animate",defaults:{tagName:"div",transition:"animate"},template:Ft.compile("\n        var tagName = self.get('tagName'),\n            isComponent = typeof tagName === 'function',\n            props = {}, \n            allProps = self.get(),\n            children = self.values(self.childrenMap);\n        for (var prop in allProps) {\n            if (prop === 'tagName' || prop === 'transition') continue;\n            props[prop] = allProps[prop];\n        }\n\n        if (isComponent) {\n            props.children = children;\n            return h(tagName, props);\n        } else {\n            return h(tagName, props, children);\n        }",{autoReturn:false,noWith:true}),_init:function hn(){this.childrenMap=Rt(this.get("children"));this.currentKeys={};this.keysToEnter=[];this.keysToLeave=[]},extend:U,values:ue,_beforeUpdate:function vn(e,t){if(!t)return;var i=Rt(this.get("children"));var n=this.childrenMap;this.childrenMap=Ut(n,i);O(i,function(e,t){if(i[t]&&(!n||!n.hasOwnProperty(t))&&!this.currentKeys[t]){this.keysToEnter.push(t)}},this);O(n,function(e,t){if(n[t]&&(!i||!i.hasOwnProperty(t))&&!this.currentKeys[t]){this.keysToLeave.push(t)}},this)},_update:function dn(e,t){if(!t)return;var i=this.keysToEnter;this.keysToEnter=[];O(i,this.performEnter,this);var n=this.keysToLeave;this.keysToLeave=[];O(n,this.performLeave,this)},performEnter:function pn(e){var t=this;var i=this.childrenMap[e].children;this.currentKeys[e]=true;if(i&&i.enter){i.enter(function(){return t._doneEntering(e)})}else{this._doneEntering(e)}},performLeave:function mn(e){var t=this;var i=this.childrenMap[e].children;this.currentKeys[e]=true;if(i&&i.leave){i.leave(function(){return t._doneLeaving(e)})}else{this._doneLeaving(e)}},_doneEntering:function _n(e){delete this.currentKeys[e];var t=Rt(this.children);if(!t[e]){this.performLeave(e)}},_doneLeaving:function yn(e){delete this.currentKeys[e];var t=Rt(this.children);if(t&&t[e]){this.performEnter(e)}else{delete this.childrenMap[e];this.vdt.update()}},enter:function gn(e){var t=this.get("transition"),i=this.element;qt(i,t+"-enter");ni.one(i,function(n){n&&n.stopPropagation();Qt(i,t+"-enter");Qt(i,t+"-enter-active");e()});i.offsetWidth;qt(i,t+"-enter-active")},leave:function bn(e){var t=this.get("transition"),i=this.element;qt(i,t+"-leave");ni.one(i,function(n){n&&n.stopPropagation();Qt(i,t+"-leave");Qt(i,t+"-leave-active");e()});i.offsetWidth;qt(i,t+"-leave-active")}});function Rt(e){if(!e)return e;if(!s(e)){var t;return t={},t[e.key||"$"]=e,t}var i={};for(var n=0;n<e.length;n++){var r=e[n];i[r.key]=r}return i}function Ut(e,t){e=e||{};t=t||{};function i(i){if(t.hasOwnProperty(i)){return t[i]}else{return e[i]}}var n={};var r=[];for(var s in e){if(t.hasOwnProperty(s)){if(r.length){n[s]=r;r=[]}}else{r.push(s)}}var a={};for(var o in t){if(n.hasOwnProperty(o)){for(var u=0;u<n[o].length;u++){var f=n[o][u];var l=i(f);a[n[o][u]]=i(f)}}a[o]=i(o)}for(var c=0;c<r.length;c++){a[r[c]]=i(r[c])}return a}function qt(e,t){if(t){if(e.classList){e.classList.add(t)}else if(!Yt(e,t)){e.className+=" "+t}}return e}function Yt(e,t){if(e.classList){return!!t&&e.className.contains(t)}return(" "+e.className+" ").indexOf(" "+t+" ")>-1}function Qt(e,t){if(t){if(e.classList){e.classList.remove(t)}else if(Yt(e,t)){e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}}}var Zt={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}};var Gt=[];function ei(){var e=document.createElement("div");var t=e.style;if(!("AnimationEvent"in window)){delete Zt.animationend.animation}if(!("TransitionEvent"in window)){delete Zt.transitionend.transition}for(var i in Zt){var n=Zt[i];for(var r in n){if(r in t){Gt.push(n[r]);break}}}}ei();function ti(e,t,i){e.addEventListener(t,i,false)}function ii(e,t,i){e.removeEventListener(t,i,false)}var ni={on:function Sn(e,t){if(Gt.length===0){window.setTimeout(t,0);return}Gt.forEach(function(i){ti(e,i,t)})},off:function xn(e,t){if(Gt.length===0){return}Gt.forEach(function(i){ii(e,i,t)})},one:function kn(e,t){var i=function n(){t.apply(this,arguments);ni.off(e,n)};ni.on(e,i)}};Kt.prototype.Animate=$t;Kt.Animate=$t;Kt.Vdt=Ft;return Kt});